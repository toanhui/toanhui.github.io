(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61990,77829],{32529:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(70107),o=n(27177),a=n(93981);function i(e,t){return Array(t-e+1).fill(void 0).map((function(t,n){return e+n}))}function s(e){var t=e.pageIndex,n=void 0===t?0:t,s=e.pageCount,u=void 0===s?0:s,c=e.setPageIndex,l=(0,o.XA)(),d=a.useMemo((function(){var e=n+1;return l?u<=5?i(1,u):e<=2?[].concat((0,r.Z)(i(1,3)),["...",u]):e>=u-2?[1,"..."].concat((0,r.Z)(i(u-2,u))):[1,"...",e,"...",u]:u<=8?i(1,u):e<=2?[].concat((0,r.Z)(i(1,3)),["...",u]):e>=u-2?[1,"..."].concat((0,r.Z)(i(u-2,u))):[1,"..."].concat((0,r.Z)(i(e,e+2)),["...",u])}),[n,l,u]),p=(0,a.useMemo)((function(){return n>0}),[n]),f=(0,a.useMemo)((function(){return n<u-1}),[n,u]),m=(0,a.useCallback)((function(e){return c(e)}),[c]);return{pager:d,canPreviousPage:p,canNextPage:f,gotoPage:m}}},30825:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(4707),o=n(63956),a=n(63989),i=(n(93981),n(29541));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=(0,a.Z)({},e);return(0,i.jsx)("svg",u(u({width:"53",height:"52",viewBox:"0 0 53 52",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:(0,i.jsx)("path",{d:"M17.3336 23.8334H43.7062V28.1667H17.3336L28.9555 39.7887L25.8919 42.8524L9.03955 26L25.8919 9.14771L28.9555 12.2114L17.3336 23.8334Z",fill:"currentColor"})}))},l=n(24201),d=function(e){var t=e.canPreviousPage,n=e.gotoPage,o=e.pageIndex,a=e.pager,s=e.canNextPage;return(0,i.jsxs)("div",{className:"mb-20 flex flex-row justify-between px-2 py-3 lg:px-6 lg:py-5",children:[(0,i.jsxs)("button",{type:"button",disabled:!t,onClick:function(){return n(o-1)},className:"flex cursor-pointer flex-row items-center text-v2-lily text-opacity-50 hover:text-opacity-100 disabled:cursor-not-allowed",children:[(0,i.jsx)(c,{width:12,height:12}),(0,i.jsx)("span",{className:"ml-1 text-xs lg:ml-2",children:r.ag._({id:"DHhJ7s"})})]}),(0,i.jsx)("div",{className:"flex flex-row space-x-1 lg:space-x-2",children:a.map((function(e,t){var r=e===o+1,a="".concat(e,"-").concat(t);return"string"===typeof e?(0,i.jsx)("div",{className:"flex flex-row items-center justify-center text-xs",children:e},a):(0,i.jsx)("div",{onClick:function(){return n(e-1)},className:(0,l.cn)("flex h-8 w-8 cursor-pointer flex-row items-center justify-center rounded-lg text-xs text-[#E8F9FF]/50 hover:text-v2-primary lg:h-10 lg:w-10",{"border border-v2-primary/50 bg-v2-primary/10 font-semibold !text-v2-primary":r}),children:e},a)}))}),(0,i.jsxs)("button",{type:"button",disabled:!s,onClick:function(){return n(o+1)},className:"flex cursor-pointer flex-row items-center text-v2-lily text-opacity-50 hover:text-opacity-100 disabled:cursor-not-allowed",children:[(0,i.jsx)("span",{className:"mr-2 text-xs",children:r.ag._({id:"hXzOVo"})}),(0,i.jsx)(c,{width:12,height:12,className:"rotate-180"})]})]})}},82625:function(e,t,n){"use strict";var r=n(72215),o=n(93981),a=n(24201),i=n(54566),s=n(29541);t.Z=function(e){var t=e.value,n=e.tokenAddress,u=e.className,c=e.priceType,l=(0,r.Bn)().getTokenInfo,d=o.useMemo((function(){return l(n)}),[l,n]);return(0,s.jsx)(s.Fragment,{children:t?(0,s.jsx)("div",{className:(0,a.cn)("text-xs font-medium text-white-25",u),children:d&&(0,s.jsx)(i.default,{tokenInfo:d,amount:Number(t.floatValue),priceType:c})}):null})}},77829:function(e,t,n){"use strict";n.r(t);var r=n(63956),o=(n(93981),n(39268)),a=n.n(o),i=n(67768),s=n(29541);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=a()((function(){var e=!0,t=(0,i.EQ)(),r=t.iOS,o=t.version;return r&&o&&o<15&&(e=!1),e?Promise.all([n.e(11197),n.e(13215),n.e(97743),n.e(45942)]).then(n.bind(n,72383)):n.e(64205).then(n.bind(n,64205))}),{loading:function(){return(0,s.jsx)("p",{children:"Loading..."})},loadableGenerated:{webpack:function(){return[72383,64205]}}});t.default=function(e){return(0,s.jsx)(c,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}},81562:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(97620),o=n(8473),a=n(38272),i=n(9319),s=n.n(i),u=n(93981),c=n(64138),l=n(45009),d=n(41144),p=function(e){return(0,l.a)(["transaction-detail-".concat(e)],(function(){return d.ZP.get("https://stats.jup.ag/transactions/".concat(e)).json()}))},f=n(77829),m=n(29541),g=s().BigInt(100),v=function(e){var t=e.swapData.map((function(e,t){var n=e.amm,r=e.inMint,o=e.outMint,i=e.inAmount,u=e.outAmount,c=new Uint8Array(32);return c[0]=t,{inputMint:r,outputMint:o,inAmount:s().BigInt(i),outAmount:s().BigInt(u),ammKey:new a.PublicKey(c),label:n,feeAmount:s().BigInt(0),feeMint:a.PublicKey.default}})),n=t.reduce((function(e,t){var n,r=t.inputMint,o=t.inAmount,a=null!==(n=e.get(r))&&void 0!==n?n:{inputAmount:s().BigInt(0),consumedPercents:0,splits:0,consumedAmount:s().BigInt(0)};return a.inputAmount=s().add(a.inputAmount,o),a.splits+=1,e.set(r,a),e}),new Map),o=t.map((function(e){var t=n.get(e.inputMint),o=function(){if(1===t.splits)return[100-t.consumedPercents,s().subtract(t.inputAmount,t.consumedAmount)];var n=s().divide(s().multiply(e.inAmount,g),t.inputAmount),r=s().divide(s().multiply(n,e.inAmount),g);return[s().toNumber(n),r]}(),a=(0,r.Z)(o,2),i=a[0],u=a[1];return t.consumedPercents+=i,t.splits-=1,t.consumedAmount=s().add(t.consumedAmount,u),{swapInfo:e,percent:i}}));return{inputMint:new a.PublicKey(e.inMint),outputMint:new a.PublicKey(e.outMint),slippageBps:0,swapMode:"ExactIn",inAmount:s().BigInt(e.inAmount),outAmount:s().BigInt(e.outAmount),otherAmountThreshold:s().BigInt(0),priceImpactPct:"",routePlan:o,contextSlot:0}},x=function(e){var t=e.transaction,n=p(t.txHash),r=u.useMemo((function(){if(n.data)return v(n.data)}),[n]);return n.error?(0,m.jsx)("div",{style:{height:400},className:"flex w-screen min-w-full max-w-[600px] items-center justify-center space-y-6 bg-[#313E4C]",children:(0,m.jsx)(o.cC,{id:"hB99cp"})}):r?(0,m.jsx)(f.default,{quoteResponse:r}):(0,m.jsx)("div",{style:{height:400},className:"flex w-screen min-w-full max-w-[600px] flex-col justify-between space-y-6 bg-[#313E4C]",children:(0,m.jsx)(c.Z,{width:600,height:380})})}},73551:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return yn},default:function(){return wn}});var r=n(97620),o=n(68586),a=n(93981),i=n(72215),s=n(72997),u=n(27195),c=n(8857),l=n.n(c),d=n(81652),p=n(33118),f=n(32529),m=n(30825),g=n(42916),v=n(4707),x=n(25224),h=n(91596),b=n(76021),y=n(23877);function w(e){return function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}({},e)}var j=n(72775),k=n(33219),S=6e4,T=1440,A=43200,O=525600;function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,k.Z)(2,arguments);var r=n.locale||j.Z;if(!r.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var o=(0,b.Z)(e,t);if(isNaN(o))throw new RangeError("Invalid time value");var a,i,s=w(n);s.addSuffix=Boolean(n.addSuffix),s.comparison=o,o>0?(a=(0,y.Z)(t),i=(0,y.Z)(e)):(a=(0,y.Z)(e),i=(0,y.Z)(t));var u,c=null==n.roundingMethod?"round":String(n.roundingMethod);if("floor"===c)u=Math.floor;else if("ceil"===c)u=Math.ceil;else{if("round"!==c)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");u=Math.round}var l,d=i.getTime()-a.getTime(),p=d/S,f=(0,h.Z)(i)-(0,h.Z)(a),m=(d-f)/S;if("second"===(l=null==n.unit?p<1?"second":p<60?"minute":p<T?"hour":m<A?"day":m<O?"month":"year":String(n.unit))){var g=u(d/1e3);return r.formatDistance("xSeconds",g,s)}if("minute"===l){var v=u(p);return r.formatDistance("xMinutes",v,s)}if("hour"===l){var x=u(p/60);return r.formatDistance("xHours",x,s)}if("day"===l){var P=u(m/T);return r.formatDistance("xDays",P,s)}if("month"===l){var E=u(m/A);return 12===E&&"month"!==n.unit?r.formatDistance("xYears",1,s):r.formatDistance("xMonths",E,s)}if("year"===l){var N=u(m/O);return r.formatDistance("xYears",N,s)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function E(e,t){return(0,k.Z)(1,arguments),P(e,Date.now(),t)}var N,M=n(13154),I=n(70006),Z=n(59978),R=n(40558),D=n(59394),B=n(58898),C=n(42082),_=n(24628),L=n(11017),q=n(25546),F=n(70602),V=n(81562),K=n(29541),U=function(e){var t=e.transaction,n=t.inputAmount,r=t.inputMint,o=t.outputMint,s=t.outputAmount,u=t.txHash,c=t.blockTime,l=(0,i.Bn)().getTokenInfo,d=(0,B.Z)().language,p=(0,I.JT)().openModal,f=(0,C.T)(),m=(0,q.bl)(c),g=(0,a.useMemo)((function(){return l(r)}),[l,r]),h=(0,a.useMemo)((function(){return l(o)}),[l,o]),b=function(){f(g,h)},y=(0,a.useMemo)((function(){return g&&h?{inAmount:(0,x.Z0)(s,h.decimals),outAmount:(0,x.Z0)(n,g.decimals)}:null}),[n,g,s,h]);return(0,K.jsxs)("div",{className:"flex w-full items-center justify-between overflow-hidden rounded-lg bg-history-item p-2 md:px-4 md:py-3",children:[(0,K.jsxs)("div",{className:"hidden flex-col gap-y-1 md:flex",children:[(0,K.jsxs)("div",{className:"flex",children:[(0,K.jsx)(R.Z,{content:v.ag._({id:"Yyubcm"}),children:(0,K.jsxs)("button",{onClick:function(){b()},className:"group/tokens flex cursor-pointer -space-x-2",children:[(0,K.jsx)("div",{className:"rounded-full border border-transparent group-hover/tokens:border-v2-primary/50 group-hover/tokens:shadow-swap-input-dark",children:(0,K.jsx)(Z.Z,{info:g,height:20,width:20})}),(0,K.jsx)("div",{className:"rounded-full border border-transparent group-hover/tokens:border-v2-primary/50 group-hover/tokens:shadow-swap-input-dark",children:(0,K.jsx)(Z.Z,{info:h,height:20,width:20})})]})}),(0,K.jsxs)("div",{className:"ml-2 flex items-center gap-x-2 text-xs text-v2-lily/70",children:[(0,K.jsxs)("span",{children:[x.uf.format(n)," ",(null===g||void 0===g?void 0:g.symbol)||""]}),(0,K.jsx)("div",{className:"fill-current text-v2-lily/30",children:(0,K.jsx)(L.Z,{})}),(0,K.jsxs)("span",{children:[x.uf.format(s)," ",(null===h||void 0===h?void 0:h.symbol)||""]})]})]}),y&&h&&g?(0,K.jsx)(M.Z,{className:"text-xs",textClassName:"!min-w-[9rem]",inputPair:h,outputPair:g,inputAmount:y.inAmount,outputAmount:y.outAmount}):null]}),(0,K.jsxs)("div",{className:"flex flex-col gap-y-1 md:hidden",children:[(0,K.jsxs)("div",{className:"flex items-center gap-2",children:[(0,K.jsx)(R.Z,{content:v.ag._({id:"Yyubcm"}),children:(0,K.jsxs)("button",{className:"group/tokens flex cursor-pointer flex-col space-y-0.5 rounded-full border border-transparent",onClick:function(e){e.stopPropagation(),b()},children:[(0,K.jsx)("div",{className:"rounded-full border border-transparent group-hover/tokens:border-v2-primary/50 group-hover/tokens:shadow-swap-input-dark",children:(0,K.jsx)(Z.Z,{info:g,height:20,width:20})}),(0,K.jsx)("div",{className:"rounded-full border border-transparent group-hover/tokens:border-v2-primary/50 group-hover/tokens:shadow-swap-input-dark",children:(0,K.jsx)(Z.Z,{info:h,height:20,width:20})})]})}),(0,K.jsxs)("div",{className:"flex flex-col items-start space-y-2 text-xs text-v2-lily/70",children:[(0,K.jsxs)("p",{className:"text-left",children:[x.uf.format(n)," ",(null===g||void 0===g?void 0:g.symbol)||""]}),(0,K.jsxs)("p",{className:"text-left",children:[x.uf.format(s)," ",(null===h||void 0===h?void 0:h.symbol)||""]})]})]}),y&&h&&g?(0,K.jsx)(M.Z,{className:"text-xs",textClassName:"!min-w-[9rem]",inputPair:h,outputPair:g,inputAmount:y.inAmount,outputAmount:y.outAmount}):null]}),(0,K.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,K.jsxs)("div",{className:"flex items-center justify-end gap-x-1 lg:gap-x-2",children:[(0,K.jsx)(R.Z,{content:v.ag._({id:"oi5bfK"}),children:(0,K.jsx)("button",{type:"button",onClick:function(){p((0,K.jsx)(V.Z,{transaction:e.transaction}),{noCloseButton:!1,containerStyle:{background:"none"}})},className:"flex h-7 w-7 items-center justify-center rounded-full border border-v2-lily/10 p-2",children:(0,K.jsx)(F.Z,{})})}),(0,K.jsx)(R.Z,{placement:"bottom-start",content:v.ag._({id:"LLapxL"}),children:(0,K.jsx)(D.Z,{txid:u,className:"flex h-7 w-7 items-center justify-center rounded-full border border-v2-lily/10 p-2",children:(0,K.jsx)(_.Z,{width:10,height:10})})})]}),m&&(0,K.jsx)("span",{className:"text-right text-xs font-normal text-v2-lily/30",children:E(m,{locale:d.timeLocale})})]})]})},Q=function(){var e=(0,d.Os)().connected,t=(0,d.Bn)(),n=t.getTokenInfo,r=t.requestTokenInfo,o=t.requestOnChainTokenInfo,i=(0,a.useState)(0),s=i[0],c=i[1],v=(0,a.useState)(!1),x=v[0],h=v[1],b=(0,g.Z)(),y=b.data,w=b.isLoading,j=(0,a.useState)([]),k=j[0],S=j[1],T=(0,a.useMemo)((function(){return y?Math.ceil(y.length/5):0}),[y]),A=(0,f.Y)({pageIndex:s,setPageIndex:c,pageCount:T}),O=A.pager,P=A.gotoPage,E=A.canPreviousPage,N=A.canNextPage;return(0,a.useEffect)((function(){if(!(!0===w&&(y||[]).length>0)){var e=(null===y||void 0===y?void 0:y.slice(5*s,5*(s+1)))||[];h(!1);var t=function(){var t=(0,u.Z)(l().mark((function t(){var a,i,s,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new Set,e.forEach((function(e){a.add(e.inputMint),a.add(e.outputMint)})),i=Array.from(a).filter(Boolean),t.next=6,r(i);case 6:if(s=t.sent,!((u=i.filter((function(e){return void 0===n(e)})).filter((function(e){return void 0===s.find((function(t){return t.address===e}))}))).length>0)){t.next=11;break}return t.next=11,o(u);case 11:S(e),h(!0),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.error("Error fetching token infos",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();t()}}),[n,y,w,s,o,r]),e?!w&&y&&0===y.length?(0,K.jsx)("div",{className:"flex h-[150px] w-full items-center justify-center rounded-lg border border-v2-lily/5",children:(0,K.jsx)("p",{className:"text-sm text-v2-lily/50",children:"No swap history"})}):(0,K.jsxs)("div",{className:"flex w-full flex-col lg:gap-y-2",children:[(0,K.jsxs)("div",{className:"relative flex w-full flex-col gap-y-2",children:[!x&&(0,K.jsx)("div",{className:"absolute left-0 top-0 z-20 h-full w-full bg-black/10 backdrop-blur-sm"}),(k||[]).map((function(e){var t=e.inputAmount,n=e.outputAmount,r=e.txHash;return t||n?(0,K.jsx)(U,{transaction:e},r):null}))]}),k&&k.length>0&&T>0?(0,K.jsx)(m.Z,{canPreviousPage:E,gotoPage:P,pageIndex:s,pager:O,canNextPage:N}):null]}):(0,K.jsxs)("div",{className:"flex h-[200px] w-full flex-col items-center justify-center space-y-2 rounded-lg border border-v2-lily/5",children:[(0,K.jsx)("p",{className:"text-sm text-v2-lily/50",children:"View History"}),(0,K.jsx)("div",{className:"h-10 w-40",children:(0,K.jsx)(p.Z,{size:"sm"})})]})},z=n(70107),G=n(63956),W=n(8473),H=n(95439),J=n(35682),Y=n(32532),X=n(38272),$=n(13838),ee=n(9319),te=n.n(ee),ne=n(13215),re=n(59644),oe=n(44495),ae=n(13170),ie=n(89521),se=n(22466),ue=n(24201),ce=n(99438),le=n(94221),de=n(25871),pe=n(57715),fe=n(84230),me=n(95523),ge=n(57281),ve=n(11823),xe=n(67768),he=n(40993),be=n(11711),ye=n(3011),we=n(39268),je=n.n(we),ke=n(85948),Se=n(90342),Te=n(70383),Ae=n(33130),Oe=n(91553),Pe=n(81098),Ee=n(51503),Ne=n(11421),Me=n(14167),Ie=n(11003),Ze=n(51232),Re=n(62146),De=n(10563),Be=n(84147),Ce=n(65864),_e=n(24684),Le=n(4003),qe=n(92956),Fe=n(65558),Ve=n.n(Fe),Ke=n(57917),Ue=n(89881),Qe=n(37124),ze=function(e){var t=e.control,n=e.loading,o=e.error,s=e.moreErrors,u=e.simulationButtonText,c=e.progress,l=(0,qe.O)().connected,d=(0,ne.cl)({control:t}).isSubmitting,f=(0,ne.qo)({control:t,name:"fromTokenAddress"}),m=(0,ne.qo)({control:t,name:"toTokenAddress"}),g=(0,ne.qo)({control:t,name:"selectedQuote"}),h=(0,ne.qo)({control:t,name:"fromValue"}),b=(0,ne.qo)({control:t,name:"toValue"}),y=(0,ne.qo)({control:t,name:"toastId"}),w=(0,i.jB)().useWSol,j=(0,i.Bn)().tokenMap,k=(0,i.FB)(f,void 0,w).balance,S=(0,i.gZ)().nativeAccount,T=(0,_e.gJ)(),A=a.useMemo((function(){return null===j||void 0===j?void 0:j.get(f)}),[f,j]),O=a.useMemo((function(){return null===j||void 0===j?void 0:j.get(m)}),[m,j]),P=a.useMemo((function(){var e=k;if(!g||!A)return!0;var t=A.decimals,n=g.quoteResponse,r=g.swapType;if("aggregator"===r){var o=n.swapMode===ge.jr.ExactOut?new $.Z(n.otherAmountThreshold.toString()).div(Math.pow(10,t)):null===h||void 0===h?void 0:h.value;return new $.Z(o||0).lessThanOrEqualTo(e)}return"rfq"!==r||new $.Z((null===h||void 0===h?void 0:h.value)||0).lessThanOrEqualTo(e)}),[k,A,g,null===h||void 0===h?void 0:h.value]),E=a.useMemo((function(){if(T&&g&&"aggregator"===g.swapType){var e=!w&&g.quoteResponse.inputMint.equals(ge.W4)?new(Ve())(g.quoteResponse.inAmount.toString()):new(Ve())(0);return((null===S||void 0===S?void 0:S.info.amount)||new(Ve())(0)).sub(e).gt(new(Ve())(T.minimumSOLForTransaction))}return!0}),[T,g,S,w]),N=(0,Ue.useIsAccountFrozen)(A),M=(0,Ue.useIsAccountFrozen)(O),I=(0,Ke.kH)(y),Z=I.isProcessing,R=I.isTxProcessed,D=I.isWaitingWalletToSign,B=a.useState(""),C=(0,r.Z)(B,2),_=C[0],L=C[1],q=a.useState(null),F=(0,r.Z)(q,2),V=F[0],U=F[1],Q=a.useCallback((function(e){L("opacity-0"),setTimeout((function(){U(e),L("opacity-100")}),200)}),[]);if(a.useEffect((function(){if(n)Q((0,K.jsx)(W.cC,{id:"yQE2r9"}));else{var e={fromTokenAddress:f,toTokenAddress:m,fromValue:h,toValue:b};if(o)return o===H.D1.TOKEN_NOT_TRADABLE?Q(v.ag._({id:"tz4GX1"})):o===H.D1.COULD_NOT_FIND_ANY_ROUTE||o===H.D1.NO_ROUTES_ERROR?((0,Ne.Kz)(ke.bk.NO_ROUTES_ERROR,e),Q(v.ag._({id:"ZSrFB6"}))):o===H.D1.ROUTE_PLAN_DOES_NOT_CONSUME_ALL_THE_AMOUNT?Q((0,K.jsx)(W.cC,{id:"P25nfv"})):o===H.D1.INVALID_REQUEST?Q(v.ag._({id:"71Xwww"})):Q((0,K.jsx)(W.cC,{id:"pspLgZ",components:{0:(0,K.jsx)("br",{})}})),void(0,Ne.Kz)(o,e);d?u?Q(u):R?Q((0,K.jsx)(W.cC,{id:"zisYnV"})):Z&&Q((0,K.jsx)(W.cC,{id:"vrnnn9"})):Q((0,K.jsx)(W.cC,{id:"vH2C/2"}))}}),[Z,d,R,D,n,Q,null===h||void 0===h?void 0:h.value,u,o,f,m,h,b]),!l&&!o)return(0,K.jsx)(p.Z,{className:"mt-2"});var z=!g||!P||!E||n||s.notTradableYet||!(null!==h&&void 0!==h&&h.value);return(0,K.jsx)(K.Fragment,{children:(0,K.jsx)("div",{className:(0,x.cn)("relative mt-2"),children:(0,K.jsxs)(Qe.Z,{disabled:z,loading:d,type:"submit",className:"relative overflow-hidden !transition-none",children:[c&&(0,K.jsx)("div",{style:{width:"".concat(c,"%")},className:"pointer-events-none absolute left-0 top-0 z-50 !h-full bg-black/20 transition-all"}),n?(0,K.jsx)(W.cC,{id:"yQE2r9"}):null!==s&&void 0!==s&&s.notTradableYet?(0,K.jsx)(W.cC,{id:"t+lyiG"}):null!==h&&void 0!==h&&h.value||null!==b&&void 0!==b&&b.value?P?E?N||M?(0,K.jsx)(W.cC,{id:"DtetjN"}):(0,K.jsx)("span",{className:(0,x.cn)("duration-200",_),children:V}):(0,K.jsx)(W.cC,{id:"GyFBKR"}):(0,K.jsx)(W.cC,{id:"UsQ5AM",values:{0:null===A||void 0===A?void 0:A.symbol}}):(0,K.jsx)(W.cC,{id:"iPMIoT"})]})})})},Ge=n(44710),We=n(50269),He=function(e){var t=e.value,n=e.onClick;return(0,K.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,K.jsxs)("div",{className:"flex cursor-pointer flex-row items-center gap-x-2 text-xs",children:[(0,K.jsx)(R.Z,{variant:"dark",offset:[16,2.5],content:(0,K.jsx)("span",{className:"max-w-xs rounded-lg text-xs text-white-75",children:(0,K.jsx)(W.cC,{id:"MLag7E"})}),children:(0,K.jsx)("div",{className:"items-center fill-current text-white/30",children:(0,K.jsx)(We.Z,{height:12,width:12})})}),(0,K.jsx)("div",{className:"font-semibold text-v2-lily/[0.35]",children:(0,K.jsx)(W.cC,{id:"X1WjNN"})})]}),(0,K.jsx)("div",{className:"justify-center",children:(0,K.jsx)(Ge.default,{className:(0,xe.cn)(t?"border border-v2-primary/10 bg-v2-primary/10":""),dotClassName:(0,xe.cn)(t?"bg-v2-primary":"border-v2-lily/30"),active:t,onClick:n})})]})},Je=n(66989),Ye=n(41264),Xe=n(28940),$e=n(55948),et=n(43723),tt=n(32285),nt=function(e){var t=e.loading,n=e.control,o=e.refresh,i=e.lastRefreshTimestamp,s=e.isSubmitting,u=(0,ne.qo)({control:n,name:"selectedQuote"}),c=(0,ne.qo)({control:n,name:"fromValue.floatValue"}),l=(0,_e.on)(),d=l.inputTokenInfo,p=l.outputTokenInfo,f=(0,_e.tX)(),m=f.isWarning,g=f.isDanger,v=(0,Xe.Z)(),x=v.showSummary,h=v.setSpotSummary,b=a.useState(x),y=(0,r.Z)(b,2),w=y[0],j=y[1];a.useEffect((function(){(m||g)&&j(!0)}),[m,g]);var k=a.useMemo((function(){return u?"aggregator"===u.swapType?{inAmount:u.quoteResponse.inAmount,outAmount:u.quoteResponse.outAmount}:"rfq"===u.swapType?{inAmount:u.quoteResponse.orderInfo.input.endAmount,outAmount:u.quoteResponse.orderInfo.output.endAmount}:{}:{}}),[u]),S=k.inAmount,T=k.outAmount;if(!d||!p)return null;var A=u&&"aggregator"===u.swapType,O=function(){return(0,K.jsx)(Ye.Z,{value:c,isSubmitting:s,lastRefreshTimestamp:i,refresh:o})};return(0,K.jsx)("div",{className:"mx-1 my-5 lg:mx-0",children:u?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:"flex justify-between",children:[S&&T&&(0,K.jsx)("span",{className:"flex flex-col",children:(0,K.jsx)(M.Z,{className:"text-xs font-medium",inputAmount:S,outputAmount:T,inputPair:d,outputPair:p,reversible:!0})}),A?(0,K.jsxs)("button",{type:"button",onClick:function(){w?(j(!1),h(!1)):(j(!0),h(!0))},className:"flex cursor-pointer items-start space-x-2 text-white/25 hover:text-v2-primary",children:[(0,K.jsx)("div",{className:"flex h-4 w-4 items-center fill-current",children:w?(0,K.jsx)(et.Z,{}):(0,K.jsx)($e.Z,{})}),(0,K.jsx)("span",{className:"text-xs font-medium",children:w?(0,K.jsx)(W.cC,{id:"DPM6n/"}):(0,K.jsx)(W.cC,{id:"YvPON1"})}),O()]}):O()]}),w&&A&&(0,K.jsx)(tt.Z,{route:u.quoteResponse,loading:t,inputPair:d,outputPair:p})]}):c>0?(0,K.jsxs)("div",{className:"flex justify-between",children:[(0,K.jsx)("div",{className:"flex h-4 w-4 items-center fill-current"}),O()]}):null})},rt=n(96065),ot=n(64138),at=n(132),it=n(31562);(N||(N={})).RFQ_AMM_PROGRAM={label:"Jupiter RFQ",ammProgramId:"RFQ"};var st=function(){function e(t){switch((0,at.Z)(this,e),(0,G.Z)(this,"quote",void 0),t.swapType){case"rfq":this.quote=this.toAggregatorQuote(t.quoteResponse);break;case"aggregator":this.quote=t.quoteResponse;break;default:this.quote=void 0}}return(0,it.Z)(e,[{key:"getQuote",value:function(){return this.quote}},{key:"toAggregatorQuote",value:function(e){var t=e.orderInfo,n=e.maker,r=t.input,o=t.output,a=r.token,i=o.token,s=te().BigInt(r.endAmount),u=te().BigInt(o.endAmount),c=[{swapInfo:{ammKey:new X.PublicKey(n),label:N.RFQ_AMM_PROGRAM.label,inputMint:a.toString(),outputMint:i.toString(),inAmount:s,outAmount:u,feeAmount:te().BigInt(0),feeMint:X.PublicKey.default},percent:100}];return{swapType:"aggregator",inputMint:a,outputMint:i,inAmount:s,outAmount:u,routePlan:c,swapMode:"ExactIn",priceImpactPct:"0",otherAmountThreshold:te().BigInt(0),slippageBps:0,contextSlot:0}}}]),e}(),ut=je()((function(){return Promise.resolve().then(n.bind(n,77829))}),{loading:function(){return(0,K.jsx)(ot.Z,{width:600,height:380})},loadableGenerated:{webpack:function(){return[77829]}}}),ct=je()((function(){return n.e(26170).then(n.bind(n,26170))}),{loading:function(){return(0,K.jsx)(ot.Z,{width:600,height:380})},loadableGenerated:{webpack:function(){return[26170]}}}),lt=function(e){var t=e.control,n=(0,ne.qo)({control:t,name:"selectedQuote"}),r="Graphviz"===a.useMemo((function(){var e;return null===(e=localStorage)||void 0===e?void 0:e.getItem("preferred-graph")}),[])?ct:ut,o=a.useMemo((function(){if(!n)return null;var e=new st(n);try{return e.getQuote()}catch(t){return void console.error(t)}}),[n]);return o?(0,K.jsx)(r,{quoteResponse:o}):null},dt={"Orca V1":"Orca","Orca V2":"Orca","Lifinity V2":"Lifinity","Lifinity V1":"Lifinity",Whirlpool:"Orca","Raydium CLMM":"Raydium",Mercurial:"Meteora"},pt=function(e){var t,n=e.loading,r=e.control,o=(0,d.jB)(),i=o.onlyDirectRoutes,s=o.setOnlyDirectRoutes,u=(0,I.JT)().openModal,c=(0,ne.qo)({control:r,name:"selectedQuote"}),l=a.useMemo((function(){return c?"rfq"===c.swapType?{splits:0,labels:new Set(["Jupiter RFQ"]),ammKeys:new Set([c.quoteResponse.maker])}:"aggregator"===c.swapType?function(e){var t=0,n=new Set,r=new Set,o=new Set;return e.forEach((function(e){var a=e.swapInfo,i=a.inputMint,s=a.label,u=a.ammKey;o.has(i)?t+=1:o.add(i),r.add(u.toString()),n.add(dt[s]||s)})),{splits:t,labels:n,ammKeys:r}}(c.quoteResponse.routePlan):null:null}),[c]),p=(0,q.Nr)(n,100),f=(0,q.Nr)(Boolean(!c||!l),100);return(0,K.jsxs)("div",{children:[(0,K.jsxs)("button",{type:"button",className:(0,ue.cn)("group relative flex w-full items-center space-x-1 overflow-hidden transition-all",f?"h-0 opacity-0":"h-[22px] opacity-100",p?"pointer-events-none opacity-50 blur-xs":"opacity-100"),onClick:function(){u((0,K.jsx)(lt,{control:r}),{noCloseButton:!1,containerStyle:{background:"none"}})},children:[(0,K.jsx)("div",{className:(0,ue.cn)("rounded-full border border-v2-primary","group-hover:from-v2-primary/25 group-hover:to-v2-primary/25"),children:(0,K.jsx)("span",{className:(0,ue.cn)("flex items-center space-x-1 rounded-[100px] bg-[rgba(199,242,132,0.1)] text-xxs","group-hover:bg-[#3a474f]"),children:(0,K.jsxs)("span",{className:(0,ue.cn)("flex items-center whitespace-nowrap px-2 py-0.5 text-v2-primary","font-semibold group-hover:text-v2-primary"),children:[(0,K.jsx)(F.Z,{className:"mb-px text-v2-primary group-hover:text-v2-primary"}),(0,K.jsxs)(K.Fragment,{children:[function(){var e=((null===l||void 0===l?void 0:l.splits)||0)+1;return e>1?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(W.cC,{id:"jNns1a",values:{numRoutes:e}})," ","+"," "]}):null}(),((null===l||void 0===l?void 0:l.ammKeys.size)||0)>0&&(0,K.jsx)(W.cC,{id:"lKVG55",values:{0:null!==(t=null===l||void 0===l?void 0:l.ammKeys.size)&&void 0!==t?t:""}})]})]})})}),(0,K.jsxs)("div",{className:"flex w-full items-center justify-between space-x-2",children:[(0,K.jsx)("span",{className:"max-w-[120px] truncate text-left text-xs text-white-50 group-hover:text-v2-primary md:max-w-[200px]",children:(null===l||void 0===l?void 0:l.labels)&&(0,K.jsx)(W.cC,{id:"74MSE4",values:{0:Array.from(l.labels).join(", ")}})}),(0,K.jsx)(rt.Z,{className:"ml-auto text-black-35 group-hover:text-v2-primary"})]})]}),i&&(0,K.jsxs)("div",{className:"mt-2 flex flex-col justify-start rounded-lg border border-warning/50 bg-warning/10 px-3 py-2 text-xs text-perps-warning",children:[(0,K.jsx)("p",{children:v.ag._({id:"yoZ1FV"})}),(0,K.jsx)("div",{onClick:function(){return s(!1)},className:"mt-2 cursor-pointer underline",children:v.ag._({id:"rPl9v6"})})]})]})},ft=n(45009);function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){(0,G.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vt=function(){function e(){(0,at.Z)(this,e),(0,G.Z)(this,"BASE_URL","https://quote-api.jup.ag/v6"),(0,G.Z)(this,"ROUTE",{PROGRAM_ID_TO_LABEL:"".concat(this.BASE_URL,"/program-id-to-label"),QUOTE:"".concat(this.BASE_URL,"/quote"),SWAP:"".concat(this.BASE_URL,"/swap")})}return(0,it.Z)(e,[{key:"getProgramIdToLabel",value:function(){var e=(0,u.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.ROUTE.PROGRAM_ID_TO_LABEL,{method:"GET"});case 2:if((t=e.sent).ok){e.next=5;break}throw t;case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getQuote",value:function(){var e=(0,u.Z)(l().mark((function e(t){var n,o,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(Object.entries(t).filter((function(e){var t=(0,r.Z)(e,2);t[0];return void 0!==t[1]})).reduce((function(e,t){var n=(0,r.Z)(t,2),o=n[0],a=n[1];return gt(gt({},e),{},(0,G.Z)({},o,a.toString()))}),{})),e.next=3,fetch("".concat(this.ROUTE.QUOTE,"?").concat(n.toString()),{});case 3:if((o=e.sent).ok){e.next=6;break}throw o;case 6:return e.next=8,o.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchSwapTransaction",value:function(){var e=(0,u.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.ROUTE.SWAP,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((n=e.sent).ok){e.next=5;break}throw n;case 5:return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xt=new vt;var ht,bt=n(39006),yt=n(3926),wt=n(53802),jt=n(84793),kt=n(55034),St=n(18849),Tt=n(62313),At=n(77508),Ot=n(57987),Pt=n(2485);!function(e){e.ACCEPTED="accepted",e.REJECTED="rejected",e.PENDING="pending",e.FAILED="failed",e.INVALID="invalid"}(ht||(ht={}));var Et,Nt=n(57406),Mt=(0,Nt.coerce)((0,Nt.instance)(X.PublicKey),(0,Nt.string)(),(function(e){return new X.PublicKey(e)})),It=(0,Nt.coerce)((0,Nt.instance)(te()),(0,Nt.string)(),(function(e){return te().BigInt(e)})),Zt=(0,Nt.coerce)((0,Nt.string)(),(0,Nt.number)(),(function(e){return Number(e)})),Rt=(0,Nt.type)({ammKey:Mt,label:(0,Nt.string)(),inputMint:(0,Nt.string)(),outputMint:(0,Nt.string)(),inAmount:It,outAmount:It,feeAmount:It,feeMint:Mt}),Dt=(0,Nt.type)({swapInfo:Rt,percent:(0,Nt.integer)()}),Bt=(0,Nt.array)(Dt),Ct=(0,Nt.type)({swapType:(0,Nt.literal)("aggregator"),inputMint:Mt,inAmount:It,outputMint:Mt,outAmount:It,otherAmountThreshold:It,priceImpactPct:Zt,swapMode:(0,Nt.enums)(["ExactIn","ExactOut"]),routePlan:Bt,slippageBps:(0,Nt.number)(),contextSlot:(0,Nt.number)(),computedAutoSlippage:(0,Nt.optional)((0,Nt.number)())}),_t=(0,Nt.type)({token:Mt,startAmount:It,endAmount:It}),Lt=(0,Nt.type)({swapType:(0,Nt.literal)("rfq"),routing:(0,Nt.enums)(["spot","onchain"]),requestId:(0,Nt.string)(),quoteId:(0,Nt.string)(),maker:(0,Nt.string)(),orderInfo:(0,Nt.type)({input:_t,output:_t}),transaction:(0,Nt.nullable)((0,Nt.optional)((0,Nt.string)())),expireAt:(0,Nt.nullable)((0,Nt.optional)((0,Nt.string)()))});function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){(0,G.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){var t=d.P7.map((function(e){return e.address}));function n(e,n,r){return(e===ge.jr.ExactOut?[n]:[n,r]).filter((function(e){return!t||(null===t||void 0===t?void 0:t.includes(e))}))}function o(e){try{return{swapType:"aggregator",quoteResponse:(0,Nt.create)(e,Ct,"createAggregatorQuoteResponseMeta Error"),original:e}}catch(t){return void console.error(t)}}function a(e){try{return{swapType:"rfq",quoteResponse:(0,Nt.create)(e,Lt,"createRfqQuoteResponseMeta Error"),original:e}}catch(t){return void console.error(t)}}e.getSupportedMints=n,e.getPltformFeeBps=function(e){var t=e.desiredFeeBps;return n(e.swapMode,e.inputMint,e.outputMint).length>0?t:void 0},e.getExcludeDexes=function(e){var t=e.programIdsExcluded,n=e.disabledProgramIds,r=e.programIdToLabelMap,o=Array.from([].concat((0,z.Z)(t),(0,z.Z)(n||[]))).map((function(e){return null===r||void 0===r?void 0:r.get(e)})).filter((function(e){return Boolean(e)}));return o.length?[o.filter(Boolean).join(",")]:void 0},e.hasExcludedJupiterRFQ=function(e){return e.has(N.RFQ_AMM_PROGRAM.ammProgramId)},e.createAggregatorQuoteResponseMeta=o,e.createRfqQuoteResponseMeta=a,e.createQuoteResponseMetaFromProxy=function(e){switch(e.swapType){case"aggregator":return o(e);case"rfq":return a(e);default:throw new Error("Unsupported kind ".concat(JSON.stringify(e)))}},e.getQuoteParamsOverrides=function(){try{var e={},t=localStorage.getItem("quoteParams");if(t){var n=JSON.parse(t);Object.assign(e,n)}var o=localStorage.getItem("quoteArgs");if(o)for(var a=JSON.parse(o),i=0,s=Object.entries(a);i<s.length;i++){var u=(0,r.Z)(s[i],2),c=u[0],l=u[1];e["quoteArg-".concat(c)]=l}return e}catch(d){return console.error(d),{}}}}(Et||(Et={}));var Vt,Kt=function(){function e(){(0,at.Z)(this,e),(0,G.Z)(this,"BASE_URL"," https://quote-proxy.jup.ag"),(0,G.Z)(this,"ROUTE",{QUOTE:"".concat(this.BASE_URL,"/quote"),SWAP:"".concat(this.BASE_URL,"/swap")})}return(0,it.Z)(e,[{key:"getQuote",value:function(){var e=(0,u.Z)(l().mark((function e(t,n){var o,a,i,s,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Et.getQuoteParamsOverrides(),a=Ft(Ft({},t),o),i=new URLSearchParams(Object.entries(a).filter((function(e){var t=(0,r.Z)(e,2);t[0];return void 0!==t[1]})).reduce((function(e,t){var n=(0,r.Z)(t,2),o=n[0],a=n[1];return Ft(Ft({},e),{},(0,G.Z)({},o,a.toString()))}),{})),e.next=5,fetch("".concat(this.ROUTE.QUOTE,"?").concat(i.toString()),{signal:n});case 5:if((s=e.sent).ok){e.next=8;break}throw s;case 8:return e.next=10,s.json();case 10:return u=e.sent,e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"postRFQSwapTransaction",value:function(){var e=(0,u.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.ROUTE.SWAP,"?swapType=rfq"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((n=e.sent).ok){e.next=5;break}throw n;case 5:return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAggregatorSwapTransaction",value:function(){var e=(0,u.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.ROUTE.SWAP,"?swapType=aggregator"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((n=e.sent).ok){e.next=5;break}throw n;case 5:return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ut=new Kt,Qt=n(795).Buffer;function zt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){(0,G.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,jt.Z)(e);if(t){var o=(0,jt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,wt.Z)(this,n)}}!function(e){e.REJECTED="REJECTED",e.FAILED="FAILED",e.WALLET_SIGNING_FAILED="WALLET_SIGNING_FAILED",e.EXPIRED="EXPIRED"}(Vt||(Vt={}));var Yt=function(e){(0,yt.Z)(n,e);var t=Jt(n);function n(e,r,o){var a;return(0,at.Z)(this,n),(a=t.call(this,e)).txid=o,(0,G.Z)((0,bt.Z)(a),"type",void 0),a.type=r,a.name="RFQSwapError",a}return(0,it.Z)(n)}((0,kt.Z)(Error));function Xt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,u.Z)(l().mark((function e(t,n){var r,o,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getParsedAccountInfo(X.SYSVAR_CLOCK_PUBKEY,n);case 2:return r=e.sent,o=r.value.data.parsed,a=o.info.unixTimestamp,e.abrupt("return",{slot:r.context.slot,unixTimestamp:a});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var en=function(){var e=(0,u.Z)(l().mark((function e(t){var n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(t,"confirmed");case 2:return n=e.sent,r=n.unixTimestamp,o=n.slot,e.abrupt("return",{slot:o,unixTimestamp:new(Ve())(r)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var tn=n(75206);var nn=n(10379);function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){(0,G.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var an=n(11805),sn=n(795).Buffer;function un(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cn(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){(0,G.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pn=je()((function(){return n.e(26207).then(n.bind(n,90753))}),{ssr:!1,loadableGenerated:{webpack:function(){return[90753]}}}),fn=je()((function(){return Promise.resolve().then(n.bind(n,89881))}),{ssr:!1,loadableGenerated:{webpack:function(){return[89881]}}}),mn=je()((function(){return Promise.all([n.e(20278),n.e(99384)]).then(n.bind(n,20278))}),{ssr:!1,loadableGenerated:{webpack:function(){return[20278]}}}),gn="PAIRS_SELECT_TO_PAIR_MODAL_ID";function vn(e){return e.map((function(e){return dn(dn({},e),{},{data:Object.keys(e.data).reduce((function(t,n){var r;return e.data&&null!==(r=e.data[n])&&void 0!==r&&r.toString?t[n]=e.data[n].toString():t[n]=e.data,t}),{})})}))}var xn=function(){return(0,K.jsx)(ce.Z,{size:"xs",type:"button",className:"mt-4",onClick:function(){var e;null===(e=document.getElementById("swap-settings-button"))||void 0===e||e.click()},children:v.ag._({id:"G2/8Wt"})})},hn=function(e){var t,n=e.inToken,o=e.outToken,s=e.onTokenChange,c=(0,i.Os)().wallet,p=(0,be.NL)(),f=(0,i.y6)().getUSDValue,m=a.useRef(null),x=(0,g.Z)().refetch,h=(0,i.C9)(),b=(0,i.jB)(),y=function(){var e=(0,a.useRef)(),t=(0,d.Bn)().connection,n=(0,d.W2)();(0,a.useEffect)((function(){null!==n&&void 0!==n&&n.referrerAccount&&n.feeBps&&(e.current={referralAccount:null===n||void 0===n?void 0:n.referrerAccount,feeBps:null===n||void 0===n?void 0:n.feeBps})}),[null===n||void 0===n?void 0:n.feeBps,null===n||void 0===n?void 0:n.referrerAccount]);var r=(0,a.useCallback)((function(t,n){e.current&&(e.current.feeAccounts||(e.current.feeAccounts=new Map),e.current.feeAccounts.set(t,n))}),[]),o=(0,a.useCallback)(function(){var n=(0,u.Z)(l().mark((function n(o){var a,i,s,u,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.current,s=null===i||void 0===i||null===(a=i.feeAccounts)||void 0===a?void 0:a.get(o),u=null===i||void 0===i?void 0:i.feeBps,!s){n.next=5;break}return n.abrupt("return",s);case 5:if(null!==s&&u){n.next=7;break}return n.abrupt("return");case 7:if(null===i||void 0===i||!i.referralAccount){n.next=14;break}return n.next=10,(0,ge.gU)({connection:t,referralAccount:i.referralAccount,mint:new X.PublicKey(o)});case 10:if(c=n.sent,r(o,c),!c){n.next=14;break}return n.abrupt("return",c);case 14:return n.abrupt("return");case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,r]);return{getPlatformFeeAccount:o}}(),w=y.getPlatformFeeAccount,j=(0,i.W2)(),k=a.useState(new Set),S=(0,r.Z)(k,2),T=S[0],A=S[1],O=(0,ne.cI)({defaultValues:{fromTokenAddress:"",toTokenAddress:"",toastId:a.useMemo((function(){return(0,Me.w)()}),[])},mode:"all",criteriaMode:"all"}),P=O.handleSubmit,E=O.setValue,N=O.reset,M=O.control,Z=O.formState,R=Z.isSubmitting,D=Z.isDirty,B=O.getValues,C=function(){var e=(0,i.Os)(),t=e.wallet,n=e.signTransaction,r=(0,J.lm)().toast,o=(0,i.C9)(),a=(0,Ke.SR)(),s=a.addNotificationTx,c=a.updateNotificationMetadata,d=a.updateNotificationTxStatus,p=(0,i.Bn)(),f=p.getTokenInfo,m=p.connection;return(0,Ot.D)({mutationKey:["rfq-swap"],mutationFn:function(){var e=(0,u.Z)(l().mark((function e(a){var i,p,g,x,h,b,y,w,j,k,S,T,A,O,P,E,N,M,I,Z,R,D,B,C,_;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null===t||void 0===t?void 0:t.adapter.publicKey,n&&i){e.next=3;break}throw new Yt("Wallet not connected, or missing wallet functions",Vt.WALLET_SIGNING_FAILED);case 3:if(p=a.rfqQuote,g=a.fromTokenInfo,x=a.toTokenInfo,h=a.toastId,b=a.generalTrackingProperties,y=p.quoteResponse,r({duration:!1,id:h,render:function(e){return(0,K.jsx)(Pt.x,Ht({},e))},closeOnClick:!1}),s(h,{status:"loading",txid:"",stepText:v.ag._({id:"5Xu+kY"})}),y.transaction){e.next=9;break}throw new Yt("Transaction is missing from quote",Vt.FAILED);case 9:return(0,Ne.Kz)(ke.NR,Ht({},b)),e.next=12,en(m);case 12:if(w=e.sent,j=w.unixTimestamp,!new(Ve())(y.expireAt||"0").sub(j).lt(new(Ve())(40))){e.next=16;break}throw new Yt("Quote expired",Vt.EXPIRED);case 16:return k=St.base64.decode(y.transaction),S=X.VersionedTransaction.deserialize(new Uint8Array(k)),e.next=20,n(S);case 20:return T=e.sent,c(h,{customTitle:v.ag._({id:"gam1uM"})}),d(h,{status:"loading",txid:"",stepText:v.ag._({id:"ybt5Vv"})}),A=T.message.serialize(),e.next=26,m.getSignaturesForAddress(i,void 0,"confirmed");case 26:return O=e.sent,P=null===O||void 0===O?void 0:O[0].signature,E=Date.now(),e.next=31,Ut.postRFQSwapTransaction({requestId:y.requestId,quoteId:y.quoteId,transaction:Qt.from(T.serialize()).toString("base64")});case 31:if(N=e.sent){e.next=34;break}throw new Yt("Failed to fill",Vt.FAILED);case 34:if(N.state!==ht.REJECTED){e.next=36;break}throw new Yt("Market maker rejected the transaction",Vt.REJECTED);case 36:if(N.state===ht.ACCEPTED){e.next=38;break}throw new Yt("Failed to fill",Vt.FAILED);case 38:return e.next=40,(0,u.Z)(l().mark((function e(){var t,n,r,o,a,s,u,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new X.PublicKey(y.maker).toBytes(),n=new(Ve())(y.expireAt||"0").add(new(Ve())(5)),e.next=4,en(m);case 4:r=e.sent;case 5:return e.next=7,en(m);case 7:return r=e.sent,e.next=10,m.getSignaturesForAddress(i,{until:P},"confirmed");case 10:o=e.sent,a=zt(o),e.prev=12,a.s();case 14:if((s=a.n()).done){e.next=22;break}if(u=s.value,c=u.signature,!At.UN.verify(Qt.from(St.bs58.decode(c)).toString("hex"),Qt.from(A).toString("hex"),t)){e.next=20;break}return e.abrupt("return",u);case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(12),a.e(e.t0);case 27:return e.prev=27,a.f(),e.finish(27);case 30:return o.length>0&&(P=o[0].signature),e.next=33,(0,ge.Dc)(500);case 33:if(r.unixTimestamp.lt(n)){e.next=5;break}case 34:return e.abrupt("return",null);case 35:case"end":return e.stop()}}),e,null,[[12,24,27,30]])})))();case 40:if(M=e.sent){e.next=43;break}throw new Yt("Market maker failed to send transaction",Vt.FAILED);case 43:if(I=M.signature,Z=M.err){e.next=57;break}(0,Ne.Kz)(ke.o1,Ht(Ht({},b),{},{txid:I,ping:(Date.now()-E)/1e3})),R=f(p.quoteResponse.orderInfo.input.token.toBase58()),D=f(p.quoteResponse.orderInfo.output.token.toBase58()),B=new $.Z(p.original.orderInfo.output.endAmount.toString()).div(Math.pow(10,D.decimals)).toString(),C=new $.Z(p.original.orderInfo.input.endAmount.toString()).div(Math.pow(10,g.decimals)).toString(),_=v.ag._({id:"amwDxk",values:{0:C.toString(),1:R.symbol,2:B.toString(),3:D.symbol}}),c(h,{customTitle:"",description:_}),d(h,{status:"success",txid:I,stepText:null}),o([g.address,x.address]),e.next=62;break;case 57:if(!Z||!I){e.next=61;break}throw new Yt("Failed to fill",Vt.FAILED,I);case 61:d(h,{status:"fail-no-txid",stepText:""});case 62:return e.abrupt("return",M);case 63:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t){var n=t.toastId,r=t.generalTrackingProperties;if(e instanceof Yt){if(e.type===Vt.FAILED)return c(n,{customTitle:"",description:e.message}),e.txid?d(n,{status:"fail",stepText:"",txid:e.txid}):d(n,{status:"fail-no-txid",stepText:""}),void(0,Ne.Kz)(ke.xp,Ht(Ht({},r),{},{txid:e.txid}));e.type===Vt.REJECTED&&(0,Ne.Kz)(ke.Nc,Ht({},r)),e.type===Vt.EXPIRED&&(0,Ne.Kz)(ke.xp,Ht({},r))}s(n,{status:"fail-no-txid",txid:"",stepText:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{children:e.message}),(0,K.jsx)(W.cC,{id:"a9VzXt"})]}),error:e}),e instanceof Tt.PY&&c(n,{customTitle:v.ag._({id:"db6r9K"})})}})}(),_=C.mutateAsync,L=(0,I.JT)().openModal,F=(0,i.Bn)(),V=F.getTokenInfo,U=F.newTokenListMap,Q=F.connection,G=(0,ne.qo)({control:M}),ee=G.fromTokenAddress,ce=G.fromValue,we=G.toValue,je=G.toTokenAddress,qe=function(e){var t=e.fromTokenAddress,n=e.fromValue,r=(0,d.y6)().tokenPriceMap,o=(0,Se.gs)().isFeeDynamic;return(0,a.useMemo)((function(){var e,a;if(!t||!n)return{};var i=(null===(e=r[t||""])||void 0===e?void 0:e.usd)||0,s=new $.Z(n.value||0).mul(i),u=(null===(a=r[tn.Gd.toBase58()])||void 0===a?void 0:a.usd)||0,c=new $.Z(s),l=o&&u&&c.gte(100)?$.Z.min(c.div(u).mul(.005),new $.Z(10).div(u)).toDecimalPlaces(9).toNumber():void 0;return{dynamicFeeMaxCap:l,dynamicFeeMaxCapLamports:l?l*Math.pow(10,9):void 0,inputAmountInUSD:s}}),[t,n,r,o])}({fromTokenAddress:null===n||void 0===n?void 0:n.address,fromValue:ce}),Fe=qe.dynamicFeeMaxCap,Ue=qe.dynamicFeeMaxCapLamports,Qe=qe.inputAmountInUSD,Ge=(0,i.mQ)(),We=Ge.slippage,Ye=Ge.slippageSettings,Xe=(0,re.Z)(se.J,null),$e=(0,r.Z)(Xe,2),et=($e[0],$e[1]),tt=(0,Se.gs)(),rt=tt.userMaxFeeInSOL,ot=tt.isRequestingMaxFee,at=tt.priorityLevel,it=tt.broadcastMode,st=tt.userMaxFeeInLamports,ut=(0,Je.EG)().profile,ct=a.useMemo((function(){return{fromTokenInfo:V(ee),toTokenInfo:V(je)}}),[V,ee,je]),lt=ct.fromTokenInfo,dt=ct.toTokenInfo;a.useEffect((function(){var e=[];n&&(e.push(n.address),E("fromTokenAddress",n.address)),o&&(e.push(o.address),E("toTokenAddress",o.address)),f(e)}),[E,f,n,o]);var mt=a.useRef(!1),gt=mt.current?ge.jr.ExactOut:ge.jr.ExactIn,vt=a.useMemo((function(){return!1===mt.current?lt&&null!==ce&&void 0!==ce&&ce.value?te().BigInt(new $.Z(ce.value).mul(Math.pow(10,lt.decimals)).floor().toFixed()):te().BigInt(0):dt&&null!==we&&void 0!==we&&we.value?te().BigInt(new $.Z(we.value).mul(Math.pow(10,dt.decimals)).floor().toFixed()):te().BigInt(0)}),[lt,null===ce||void 0===ce?void 0:ce.value,dt,null===we||void 0===we?void 0:we.value]);a.useEffect((function(){A((function(e){return e.size?new Set:e}))}),[b.asLegacyTransaction]);var bt=a.useMemo((function(){if(gt!==ge.jr.ExactOut)return b.asLegacyTransaction?void 0:64}),[gt,b.asLegacyTransaction]),yt=a.useMemo((function(){return dn(dn({amount:vt,inputMint:ee?new X.PublicKey(ee):void 0,outputMint:je?new X.PublicKey(je):void 0,maxAccounts:bt,swapMode:gt},"minimum-output"===Ye.mode?{slippageBps:0}:"dynamic"===Ye.mode?{slippageBps:Math.ceil(100*Number(Ye.maxDynamicSlippagePct))}:"fixed"===Ye.mode?{slippageBps:Math.ceil(100*Number(We)),computeAutoSlippage:!0}:void 0),{},{minimizeSlippage:Boolean("true"===an.env.NEXT_PUBLIC_IS_EDGE)})}),[vt,ee,bt,We,Ye,gt,je]),wt=(0,ft.a)({queryKey:["programIdToLabel"],queryFn:function(){var e=(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt.getProgramIdToLabel();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cacheTime:1/0,staleTime:1/0}),jt=wt.data,kt=a.useMemo((function(){return jt?new Map(Object.entries(jt)):new Map}),[jt]),Nt=(0,Te.j)(),Mt=Nt.rfqEnabled,It=Nt.setRFQEnabled,Zt=a.useMemo((function(){if(b.useWSol||!Mt)return"aggregator"}),[b.useWSol,Mt]),Rt=a.useMemo((function(){if("aggregator"!==Zt)return null!==c&&void 0!==c&&c.adapter.publicKey?c.adapter.publicKey.toBase58():X.SystemProgram.programId.toBase58()}),[Zt,null===c||void 0===c||null===(t=c.adapter.publicKey)||void 0===t?void 0:t.toBase58()]),Dt=function(e){var t=e.amount,n=e.fromTokenAddress,o=e.toTokenAddress,i=e.slippageBps,s=e.autoSlippage,c=e.maxAutoSlippageBps,p=e.swapMode,f=e.maxAccounts,m=e.disabledProgramIds,g=e.computeAutoSlippage,v=e.minimizeSlippage,x=e.preferLiquidDexes,h=e.autoSlippageCollisionUsdValue,b=e.debounceTime,y=void 0===b?250:b,w=e.swapType,j=e.programIdToLabelMap,k=e.programIdsExcluded,S=e.taker,T=(0,d.W2)(),A=(0,a.useState)(!1),O=A[0],P=A[1],E=(0,d.jB)(),N=E.onlyDirectRoutes,M=E.asLegacyTransaction,I=(0,Te.j)().rfqEnabled,Z=(0,a.useState)(),R=Z[0],D=Z[1],B=(0,a.useMemo)((function(){if(!te().equal(t,te().BigInt(0))&&n&&o)return{inputMint:n,outputMint:o,amount:te().toNumber(t),autoSlippage:s,maxAutoSlippageBps:c,autoSlippageCollisionUsdValue:h,slippageBps:i,swapMode:p,excludeDexes:Et.getExcludeDexes({programIdsExcluded:k,disabledProgramIds:m,programIdToLabelMap:j}),onlyDirectRoutes:N,asLegacyTransaction:M,platformFeeBps:null!==T&&void 0!==T&&T.feeBps?Et.getPltformFeeBps({desiredFeeBps:null===T||void 0===T?void 0:T.feeBps,swapMode:p,inputMint:n,outputMint:o}):void 0,maxAccounts:f,computeAutoSlippage:g,minimizeSlippage:v,preferLiquidDexes:x,swapType:w,taker:S,tokenCategoryBasedIntermediateTokens:!0}}),[t,n,o,s,c,h,i,p,k,m,j,N,M,null===T||void 0===T?void 0:T.feeBps,f,g,v,x,w,S]),C=function(){var e=(0,u.Z)(l().mark((function e(t){var r,a,d,m,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(new Date).getTime(),a=r,D(void 0),e.prev=3,n&&o){e.next=6;break}return e.abrupt("return",null);case 6:if(!i||!s){e.next=8;break}throw new Error("Cannot set both slippageBps and autoSlippage");case 8:if(s||!c){e.next=10;break}throw new Error("Cannot set maxAutoSlippageBps without autoSlippage");case 10:if(p===H.jr.ExactOut&&f&&console.warn("maxAccounts is not supported for ExactOut swap mode"),p!==H.jr.ExactOut||"rfq"!==w){e.next=13;break}throw new Error("RFQ does not support ExactOut");case 13:if(B){e.next=15;break}return e.abrupt("return",null);case 15:if("aggregator"!==w||I){e.next=20;break}return e.next=18,xt.getQuote(B);case 18:return d=e.sent,e.abrupt("return",on(on({},d),{},{swapType:w}));case 20:return e.next=22,Ut.getQuote(B,t);case 22:return m=e.sent,e.abrupt("return",m);case 26:if(e.prev=26,e.t0=e.catch(3),!(0,nn.isAbortError)(e.t0)){e.next=30;break}return e.abrupt("return",null);case 30:if(console.error(e.t0),a===r){e.next=33;break}return e.abrupt("return",null);case 33:return e.next=35,(0,u.Z)(l().mark((function t(){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(e.t0 instanceof Response)){t.next=6;break}return t.next=4,e.t0.json();case 4:return n=t.sent,t.abrupt("return",n.errorCode||null);case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log("Error parsing error response",t.t0),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))();case 35:return g=e.sent,D(g||H.D1.FETCH_ROUTES_ERROR),e.abrupt("return",null);case 38:return e.prev=38,P(!1),e.finish(38);case 41:case"end":return e.stop()}}),e,null,[[3,26,38,41]])})));return function(t){return e.apply(this,arguments)}}(),_=(0,q.Nr)([t,B],y),L=(0,r.Z)(_,2),F=L[0],V=L[1];(0,a.useEffect)((function(){O&&F===t&&P(!1)}),[F,t,O]),(0,a.useEffect)((function(){te().greaterThan(t,te().BigInt(0))?P(!0):te().equal(t,te().BigInt(0))&&P(!1)}),[t.toString()]);var K=(0,a.useMemo)((function(){return te().equal(F,te().BigInt(0))}),[F]),U=(0,ft.a)({queryKey:["queryProxyQuote",V],queryFn:function(e){var t=e.signal;return C(t)},retry:1,enabled:!!F&&!!o&&!!n&&!K,cacheTime:0,staleTime:0,keepPreviousData:!K}),Q=U.data,z=U.refetch,G=U.dataUpdatedAt,W=U.errorUpdatedAt,J=U.isError,Y=U.isSuccess,X=U.isFetching,$=(0,a.useMemo)((function(){if(Q)try{return Et.createQuoteResponseMetaFromProxy(Q)}catch(e){console.error(e)}}),[Q]);return{refetch:z,loading:O||X,error:R,lastRefreshTimestamp:function(){var e;return J&&(e=W),Y&&(e=G),e?new Date(e).getTime():0}(),quoteMeta:$}}(dn(dn({amount:vt,fromTokenAddress:ee,toTokenAddress:je,maxAccounts:bt,swapMode:gt,programIdsExcluded:T},"minimum-output"===Ye.mode?{slippageBps:0}:"dynamic"===Ye.mode?{slippageBps:Math.ceil(100*Number(Ye.maxDynamicSlippagePct))}:"fixed"===Ye.mode?{slippageBps:Math.ceil(100*Number(We)),computeAutoSlippage:!0}:void 0),{},{swapType:Zt,minimizeSlippage:Boolean("true"===an.env.NEXT_PUBLIC_IS_EDGE),programIdToLabelMap:kt,taker:Rt})),Bt=Dt.refetch,Ct=Dt.loading,_t=Dt.error,Lt=Dt.lastRefreshTimestamp,qt=Dt.quoteMeta,Ft=(0,Oe.m)().data,Kt=(0,ye.KO)(Ee.L.quotedSlippage),Gt=(0,r.Z)(Kt,2),Wt=Gt[0],Jt=Gt[1];a.useEffect((function(){if("aggregator"===(null===qt||void 0===qt?void 0:qt.swapType)){var e=qt.quoteResponse;e.slippageBps?Jt(e.slippageBps):Jt(void 0)}else Jt(void 0)}),[Wt,Jt,We,qt]);var Xt=(0,ye.KO)(Pe.j.amms),$t=(0,r.Z)(Xt,2)[1];a.useEffect((function(){if(kt&&kt.size>0){var e=(0,z.Z)(kt.entries()).map((function(e){var t=(0,r.Z)(e,2),n=t[0];return{label:t[1],ammProgramId:n}}));$t(e)}}),[kt,$t,null===Ft||void 0===Ft?void 0:Ft.swapSettings]);var rn=(0,ye.KO)(Pe.j.userExcludedAmms),cn=(0,r.Z)(rn,2),ln=cn[0],hn=cn[1];a.useEffect((function(){var e;A(new Set([].concat((0,z.Z)((null===Ft||void 0===Ft||null===(e=Ft.swapSettings)||void 0===e?void 0:e.excludedAmms)||[]),(0,z.Z)(ln.map((function(e){return e.ammProgramId}))))))}),[ln,Ft,A]),a.useEffect((function(){if(E("selectedQuote",qt),qt){if("aggregator"===qt.swapType){if(m.current=Date.now(),!dt)return;if(!1===mt.current){var e=new $.Z(qt.quoteResponse.outAmount.toString()||"0").div(Math.pow(10,dt.decimals)),t=e.toFixed()||"",n=e?e.toNumber():e;E("toValue",{formattedValue:t,value:t,floatValue:n})}else{if(!lt)return;var r=new $.Z(qt.quoteResponse.inAmount.toString()||"0").div(Math.pow(10,lt.decimals)),o=r.toFixed()||"",a=r?r.toNumber():r;E("fromValue",{formattedValue:o,value:o,floatValue:a})}}if("rfq"===qt.swapType){if(!0===mt.current)return;if(!qt||Ct||!dt)return void E("toValue",{floatValue:void 0,formattedValue:"",value:""});var i=new $.Z(qt.quoteResponse.orderInfo.output.endAmount.toString()).div(Math.pow(10,dt.decimals));E("toValue",{floatValue:i.toNumber(),formattedValue:i.toFixed(),value:i.toFixed()})}}else E(!1===mt.current?"toValue":"fromValue",{floatValue:void 0,formattedValue:"",value:""})}),[dt,E,lt,qt,Ct]);var bn="aggregator"===(null===qt||void 0===qt?void 0:qt.swapType)?qt.quoteResponse:void 0;(0,_e.Gl)(Ct?void 0:bn,ee,je);var yn=(0,Ae.R3)(),wn=(0,ye.KO)(he.yz),jn=(0,r.Z)(wn,1)[0],kn=a.useState(),Sn=(0,r.Z)(kn,2),Tn=Sn[0],An=Sn[1],On=(0,J.lm)().toast,Pn=a.useState(),En=(0,r.Z)(Pn,2),Nn=En[0],Mn=En[1],In=a.useCallback(function(){var e=(0,u.Z)(l().mark((function e(t,n){var o,a,s,d,f,m,g,y,k,S,T,O,P,N,M,I,Z,R,D,B,C,_,q,F,U,G;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.fromTokenAddress,a=t.toTokenAddress,s=t.toastId,d=t.minimumOutput,f=t.selectedQuote,c&&c.adapter.publicKey&&f&&"aggregator"===f.swapType&&o&&a){e.next=3;break}return e.abrupt("return");case 3:if(null===j||void 0===j||j.persistReferrer(),m={startTime:void 0},g=Date.now(),y=f,(0,Ne.Kz)(ke.NR,dn(dn({},n),{},{ammLabels:(0,z.Z)((0,pe.Kc)(y.quoteResponse.routePlan).labels),deltaFromQuoteMs:Date.now()-Lt})),k=V(o),S=V(a),T=function(e){var t=e.txid,n=e.inputMint,o=e.outputMint,a=e.transactionResponse,i=e.jitoResponse,s=e.jitoTipAmount;try{var u,l=(0,ge.Od)({txid:t,inputMint:n,outputMint:o,hasWrappedSOL:b.useWSol,transactionResponse:a,user:c.adapter.publicKey}),d=(0,r.Z)(l,2),p=d[0],m=d[1],g=k.symbol,v=xe.uf.format(new $.Z(p).div(Math.pow(10,k.decimals))),x=S.symbol,h=xe.uf.format(new $.Z(m).div(Math.pow(10,S.decimals))),y=m?new $.Z(m).div(f.quoteResponse.outAmount.toString()).minus(1).mul(-1e4).toNumber():null,w=y?new $.Z(y).div(100).toFixed(2):null,j=!(null===i||void 0===i||!i.result)||void 0,T=j&&s?(0,xe.lt)(s,9):null!==(u=a.meta)&&void 0!==u&&u.fee?(0,xe.lt)(a.meta.fee,9):void 0;return{sourceTokenBalanceChange:p,destinationTokenBalanceChange:m,inputSymbol:g,inputAmount:v,outputSymbol:x,outputAmount:h,incurredSlippageBps:y,incurredSlippagePct:w,feeInSOL:T,jitoLanded:j}}catch(A){return null}},O=[],An(v.ag._({id:"QPASEU"})),N=function(){var e=(0,u.Z)(l().mark((function e(t){var u,c,d,f,w,E,N,M;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=y.quoteResponse,c=u.inputMint,d=u.outputMint,!("error"in t)){e.next=5;break}console.error("Error in swapTransactionResponse",t.error),e.next=12;break;case 5:return f=Uint8Array.from(sn.from(t.swapTransaction,"base64")),w=b.asLegacyTransaction?X.Transaction.from(f):X.VersionedTransaction.deserialize(f),E=(0,ge.YC)(w),e.next=10,yn(w,{idl:ge.GS,idlProgramId:ge.Cc,blockhash:E,lastValidBlockHeight:t.lastValidBlockHeight,skipPreflight:!0},{isSwapTransaction:!0,dynamicFeeMaxCap:Ue,referenceFee:function(){var e=(0,Y.eD)(w);return e?Number(e):"MEDIUM"===at?jn.jup2.m:"HIGH"===at?jn.jup2.h:"VERY_HIGH"===at?jn.jup2.vh:void 0}(),minimumFee:he.uo,toastId:s,submittingMessage:null,onSending:function(){m.startTime=Date.now(),An(void 0)},autoResolveOnProcessed:!0,resolveSuccessTitleAndDescription:function(e,r,o,a){var i;O=(0,ge.vw)(e);var s=T({txid:r,inputMint:c,outputMint:d,transactionResponse:e,jitoResponse:o,jitoTipAmount:a}),u=v.ag._({id:"Cleqqa"});s&&(u=v.ag._({id:"amwDxk",values:{0:s.inputAmount,1:s.inputSymbol,2:s.outputAmount,3:s.outputSymbol}}));var l,p=dn(dn({},n),{},{feeInSOL:null===s||void 0===s?void 0:s.feeInSOL,txid:r,sourceTokenBalanceChange:null===s||void 0===s?void 0:s.sourceTokenBalanceChange,destinationTokenBalanceChange:null===s||void 0===s?void 0:s.destinationTokenBalanceChange,incurredSlippage:null===s||void 0===s?void 0:s.incurredSlippageBps,events:vn(O),computeUnitsConsumed:null===(i=e.meta)||void 0===i?void 0:i.computeUnitsConsumed,dynamicSlippageReport:t.dynamicSlippageReport,jitoLanded:null===s||void 0===s?void 0:s.jitoLanded});(m.startTime&&(0,Ne.Kz)(ke.o1,dn(dn({},p),{},{ping:(Date.now()-m.startTime)/1e3})),null!==j&&void 0!==j&&j.referrerAccount)&&(0,Ne.Kz)(ke.Yl,dn(dn({},p),{},{referrerAccount:j.referrerAccount.toString(),feeBps:null===(l=j.feeBps)||void 0===l?void 0:l.toString()}));return{title:"",description:u}},resolveErrorTitleAndDescription:function(e,o){if(e instanceof X.TransactionExpiredBlockheightExceededError)return{title:v.ag._({id:"DkFCBK"}),description:v.ag._({id:"vBW4B0"})};var a=(0,ge.IS)(e),s=a.message,u=a.code,l=a.programIds,p=a.txid,f=p&&null!==o&&void 0!==o&&o.transactionResponse?T({txid:p,inputMint:c,outputMint:d,transactionResponse:o.transactionResponse}):null,g=function(){var e,t=(null===l||void 0===l?void 0:l.reduce((function(e,t){var n=kt.get(t);return n?[n,t]:e}),["",""]))||["",""],o=(0,r.Z)(t,2),a=o[0],c=o[1],d=u&&(null===(e={LBUZKhRxPF3XUpBCjp4YzTKgLccjZhTSDM9YuVaPwxo:[6001,3005],CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK:[6019],whirLbMiicVdio4qvUfM5KAg6Ct8VwpYzGff3uctyCc:[6023]}[c])||void 0===e?void 0:e.includes(u));if(a&&!d)return L((0,K.jsx)(Be.Z,{ammName:a,excludeAmm:function(){A((function(e){var t=ln.map((function(e){return e.ammProgramId}));return b.asLegacyTransaction?new Set([].concat((0,z.Z)(t),[c])):(e.add(c),new Set([].concat((0,z.Z)(t),(0,z.Z)(e))))}))}}),{noCloseButton:!1}),{title:v.ag._({id:"A5SJF8",values:{faultyAmmLabel:a}}),description:u?v.ag._({id:"r3e05H",values:{code:u}}):s,shouldShowFeedbackLink:!0};var p=H.sv,m=ge.Cc.toBase58(),g=Ye.mode;if(null!==l&&void 0!==l&&l.some((function(e){return e===m}))||d){if(u===H.sv.SlippageToleranceExceeded.code||d){var x=function(){var e,t,r=P&&"dynamicSlippageReport"in P&&null!==(e=P.dynamicSlippageReport)&&void 0!==e&&e.slippageBps?new $.Z(null===(t=P.dynamicSlippageReport)||void 0===t?void 0:t.slippageBps).div(100):null,o=null!==f&&void 0!==f&&f.incurredSlippagePct?Number(null===f||void 0===f?void 0:f.incurredSlippagePct):null;return o?"fixed"===g?{title:v.ag._({id:"Ql8gPs"}),description:(0,K.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,K.jsx)("p",{children:v.ag._({id:"A4rcdv",values:{incurredSlippagePct:o}})}),(0,K.jsx)("p",{children:v.ag._({id:"XU0vnD"})})]})}:"minimum-output"===g?{title:v.ag._({id:"IZu71w"}),description:(0,K.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,K.jsx)("p",{children:v.ag._({id:"awrHjc"})})})}:o>=i.oo?{title:v.ag._({id:"Tfrtw5"}),description:(0,K.jsxs)("div",{className:"mb-4 flex flex-col gap-y-2",children:[(0,K.jsx)("p",{children:v.ag._({id:"vLN4hr",values:{incurredSlippagePct:o}})}),(0,K.jsx)("p",{children:v.ag._({id:"2NrJLl"})}),(0,K.jsx)(xn,{})]})}:o<Ye.maxDynamicSlippagePct?{title:v.ag._({id:"Ql8gPs"}),description:r?(0,K.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,K.jsx)("p",{children:"The final slippage was ".concat(o,"% and it has exceeded the optimized slippage at ").concat(r,"%.")})}):(0,K.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,K.jsx)("p",{children:"The final slippage was ".concat(o,".")})})}:o>Ye.maxDynamicSlippagePct?{title:v.ag._({id:"4UCKKK"}),description:(0,K.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,K.jsx)("p",{children:v.ag._({id:"ybpHil",values:{incurredSlippagePct:o}})}),(0,K.jsx)("p",{children:v.ag._({id:"r14tPR"})}),(0,K.jsx)(xn,{})]})}:((0,Ne.Kz)(ke.A$,dn(dn({},n),{},{incurredSlippagePct:o,dynamicSlippageSubmittedPct:r})),r?{title:v.ag._({id:"Ql8gPs"}),description:v.ag._({id:"xKXM1M",values:{incurredSlippagePct:o,dynamicSlippageSubmittedPct:r}})}:{title:v.ag._({id:"Ql8gPs"}),description:v.ag._({id:"7b18nw",values:{incurredSlippagePct:o}})}):{title:v.ag._({id:"IZu71w"}),description:v.ag._({id:"9l/HZb"})}}();return{title:x.title,description:x.description,shouldShowFeedbackLink:!1}}if(u===p.BalancesNotExtractedProperly.code)return{title:v.ag._({id:"KEtDKy"}),shouldShowFeedbackLink:!0};if(u===p.TransactionNotConfirmed.code)return{title:v.ag._({id:"XLzgMr"}),description:v.ag._({id:"fnUfx2"}),shouldShowFeedbackLink:!1,shouldShowUpdatePriorityFee:!1};if(u===p.TransactionExpiredBlockheightExceeded.code)return{title:v.ag._({id:"HxpEyw"}),description:v.ag._({id:"jsGkrq"}),shouldShowFeedbackLink:!0}}switch(u){case p.InsufficientSOL.code:return{title:v.ag._({id:"GyFBKR"}),description:v.ag._({id:"Qfmu8/"}),shouldShowFeedbackLink:!0};case p.FrozenAccount.code:return{title:v.ag._({id:"MDUjKS"}),description:v.ag._({id:"Xl2KCt"}),shouldShowFeedbackLink:!0}}return{title:s||(null===u||void 0===u?void 0:u.toString())||"",description:u?v.ag._({id:"r3e05H",values:{code:u}}):s,shouldShowFeedbackLink:!0}}();return(0,Ne.Kz)(ke.xp,dn(dn(dn(dn({txid:p,code:u,message:s,programIds:l},n),g),{},{sourceTokenBalanceChange:null===f||void 0===f?void 0:f.sourceTokenBalanceChange,destinationTokenBalanceChange:null===f||void 0===f?void 0:f.destinationTokenBalanceChange,incurredSlippage:null===f||void 0===f?void 0:f.incurredSlippageBps,events:vn(O)},m.startTime?{pingInSecond:(Date.now()-m.startTime)/1e3}:void 0),{},{feeInSOL:null===f||void 0===f?void 0:f.feeInSOL,dynamicSlippageReport:t.dynamicSlippageReport})),g}});case 10:(N=e.sent).success?(et({fromPair:k.address,toPair:S.address}),p.invalidateQueries({queryKey:[i.gj]})):"error"in N&&N.error&&4001===(null===(M=N.error.error)||void 0===M?void 0:M.code)&&(0,Le.Zt)(Q,dn(dn({},t),{},{swapTransaction:w,blockhash:E}),0).then((function(e){var r,i,s,u,c=e.simulatedResponse;if(c){var l=(0,Le.pu)(c,o,a,y);i=l.simulatedIncurredSlippage,s=l.rejectedSimulationError,u=l.eventSimulation}(0,Ne.Kz)(ke.Nc,dn(dn({rejectedSimulationError:s,events:vn(u||[]),error:N.error.error},n),{},{pingInSecond:(Date.now()-g)/1e3,rejectedSimulationSlippage:null===(r=i)||void 0===r?void 0:r.toNumber(),quoteContextSlot:y.quoteResponse.contextSlot,rejectedSimulationSlot:null===c||void 0===c?void 0:c.context.slot,dynamicSlippageReport:t.dynamicSlippageReport}))})).catch((function(){}));case 12:x(),h([o,a,ae.W4]),Bt();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=14,M=null===c||void 0===c?void 0:c.adapter.publicKey){e.next=18;break}return e.abrupt("return");case 18:if(0===(I=Et.getSupportedMints(y.quoteResponse.swapMode,y.quoteResponse.inputMint.toString(),y.quoteResponse.outputMint.toString())).length){e.next=25;break}return e.next=22,(0,u.Z)(l().mark((function e(){var t,n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=un(I),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=12;break}return r=n.value,e.next=7,w(r);case 7:if(!(o=e.sent)){e.next=10;break}return e.abrupt("return",o);case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:return e.abrupt("return",void 0);case 21:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})))();case 22:e.t0=e.sent,e.next=26;break;case 25:e.t0=void 0;case 26:if(Z=e.t0,R={quoteResponse:y.original,userPublicKey:M.toString(),wrapAndUnwrapSol:!b.useWSol,feeAccount:null===Z||void 0===Z?void 0:Z.toBase58(),dynamicComputeUnitLimit:!0,correctLastValidBlockHeight:!0,asLegacyTransaction:b.asLegacyTransaction,allowOptimizedWrappedSolTokenAccount:!0,prioritizationFeeLamports:{priorityLevelWithMaxLamports:{maxLamports:st,global:!1,priorityLevel:function(){switch(at){case"MEDIUM":return"medium";case"HIGH":return"high";case"VERY_HIGH":return"veryHigh"}}()}}},"fixed"!==Ye.mode){e.next=40;break}if(Mt){e.next=35;break}return e.next=32,xt.fetchSwapTransaction(R);case 32:P=e.sent,e.next=38;break;case 35:return e.next=37,Ut.getAggregatorSwapTransaction(R);case 37:P=e.sent;case 38:e.next=65;break;case 40:if("minimum-output"!==Ye.mode||!d){e.next=44;break}throw new Error("minimum-output not supported");case 44:if("dynamic"!==Ye.mode){e.next=65;break}if(R.dynamicSlippage="dynamic"===Ye.mode?{maxBps:Math.round(100*Ye.maxDynamicSlippagePct)}:void 0,Mt){e.next=52;break}return e.next=49,xt.fetchSwapTransaction(R);case 49:P=e.sent,e.next=55;break;case 52:return e.next=54,Ut.getAggregatorSwapTransaction(R);case 54:P=e.sent;case 55:if("swapTransaction"in P){e.next=57;break}throw new Error("No swapTransaction in swapTransactionResponseToUse");case 57:if(C=new $.Z((null===(D=P.dynamicSlippageReport)||void 0===D?void 0:D.simulatedIncurredSlippageBps)||0),Boolean(C&&new $.Z(-1*Ye.maxDynamicSlippagePct*100).gte(C))&&(_=function(){var e=new $.Z(C).mul(-1).div(100).toNumber();return Ye.maxDynamicSlippagePct<i.oo?{title:v.ag._({id:"SaPP8z"}),description:(0,K.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,K.jsx)("p",{children:v.ag._({id:"9Ja0ta",values:{simulatedIncurredSlippagePct:e}})}),(0,K.jsx)("p",{children:v.ag._({id:"bjQCJE"})}),(0,K.jsx)(xn,{})]})}:{title:v.ag._({id:"cFP4Ga"}),description:(0,K.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,K.jsx)("p",{children:v.ag._({id:"fFgRd0",values:{simulatedIncurredSlippagePct:e}})}),(0,K.jsx)("p",{children:v.ag._({id:"2NrJLl"})}),(0,K.jsx)(xn,{})]})}}(),q=_.title,F=_.description,On({title:q,description:F,variant:Ie.Lb.INFO,duration:1e4})),U=null===(B=P.dynamicSlippageReport)||void 0===B?void 0:B.slippageBps){e.next=63;break}throw new Error("Could not optimise slippage");case 63:G=new $.Z(U).div(100).toNumber(),An((0,K.jsxs)("div",{children:[v.ag._({id:"2JmVX8"})," ",G,"%"]}));case 65:e.next=70;break;case 67:e.prev=67,e.t1=e.catch(14),console.log("Error getting swap transaction",e.t1);case 70:if(e.prev=70,P){e.next=73;break}throw new Error("No swapTransactionResponseToUse");case 73:return e.next=75,N(P);case 75:e.next=80;break;case 77:e.prev=77,e.t2=e.catch(70),console.log("Error performing swap",e.t2);case 80:return e.prev=80,Mn(void 0),E("toastId",(0,Me.w)()),An(void 0),e.finish(80);case 85:case"end":return e.stop()}}),e,null,[[14,67],[70,77,80,85]])})));return function(t,n){return e.apply(this,arguments)}}(),[c,j,Lt,V,b.useWSol,b.asLegacyTransaction,x,h,Bt,yn,Ue,at,jn.jup2.m,jn.jup2.h,jn.jup2.vh,Ye,kt,L,ln,et,p,Q,w,st,Mt,On,E]),Zn=a.useCallback(function(){var e=(0,u.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,An(v.ag._({id:"QPASEU"})),e.next=4,_({rfqQuote:t,fromTokenInfo:lt,toTokenInfo:dt,toastId:(0,Me.w)(),generalTrackingProperties:n});case 4:An(void 0),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),An(void 0),e.abrupt("return");case 11:return e.prev=11,e.next=14,Bt();case 14:return E("toastId",(0,Me.w)()),e.finish(11);case 16:case"end":return e.stop()}}),e,null,[[0,7,11,16]])})));return function(t,n){return e.apply(this,arguments)}}(),[_,lt,dt,Bt,E]),Rn=a.useCallback(function(){var e=(0,u.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qt&&c){e.next=2;break}return e.abrupt("return");case 2:if(n={quoteResponseMeta:qt.original,wallet:c.adapter.name,inputAmountInUSD:Qe,excludedAmms:Array.from(T),slippageSettings:Ye,jupiterParams:(0,Ze.w_)(yt),jupiterConfigProps:(0,Ze.w_)({restrictIntermediateTokens:b.restrictIntermediateTokens,onlyDirectRoutes:b.onlyDirectRoutes,useWSol:b.useWSol,asLegacyTransaction:b.asLegacyTransaction}),globalPriority:{prioritizationFee:Fe||rt,prioritizationFeeLamports:Ue||st,isRequestingMaxFee:ot,priorityLevel:at,broadcastMode:it},profileMode:ut,quoteTimestamp:m.current},"aggregator"!==(null===qt||void 0===qt?void 0:qt.swapType)){e.next=8;break}return e.next=6,In(t,n);case 6:e.next=11;break;case 8:if("rfq"!==(null===qt||void 0===qt?void 0:qt.swapType)){e.next=11;break}return e.next=11,Zn(qt,n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[qt,c,Qe,T,Ye,yt,b.restrictIntermediateTokens,b.onlyDirectRoutes,b.useWSol,b.asLegacyTransaction,Fe,rt,Ue,st,ot,at,it,ut,In,Zn]),Dn=(0,se.V)();(0,oe.Z)((function(){Dn[0]&&Dn[1]&&(lt&&lt.address!==Dn[0].address&&E("fromTokenAddress",Dn[0].address),dt&&dt.address!==Dn[1].address&&E("toTokenAddress",Dn[1].address))}),Dn);var Bn=(0,ie.Z)();a.useEffect((function(){Bn&&E("fromValue",{formattedValue:Bn,value:Bn,floatValue:Number(Bn)})}),[E,Bn]);var Cn=a.useCallback((function(){if(!Ct&&dt&&lt){var e,t=B(),n=t.fromTokenAddress,r=t.toTokenAddress,o=t.fromValue;Number((null===o||void 0===o?void 0:o.floatValue)||0)>0&&"aggregator"===(null===qt||void 0===qt?void 0:qt.swapType)&&(e=!1===mt.current?(0,xe.lt)(qt.quoteResponse.outAmount,dt.decimals).toString():(0,xe.lt)(qt.quoteResponse.inAmount,lt.decimals).toString()),Number((null===o||void 0===o?void 0:o.floatValue)||0)>0&&"rfq"===(null===qt||void 0===qt?void 0:qt.swapType)&&!1===mt.current&&(e=(0,xe.lt)(qt.quoteResponse.orderInfo.output.endAmount,dt.decimals).toString()),N(dn({fromTokenAddress:n,toTokenAddress:r},!1===mt.current?{fromValue:{value:e,floatValue:Number(e),formattedValue:e}}:{toValue:{value:e,floatValue:Number(e),formattedValue:e}})),s(dt,lt)}}),[Ct,dt,lt,B,qt,N,s]),_n=a.useMemo((function(){if(!qt)return!1;var e=qt.swapType,t=qt.quoteResponse;return"rfq"!==e&&(!(t.contextSlot||!U.has(ee)&&!U.has(je))||void 0)}),[qt,je,U,ee]),Ln=a.useRef(null),qn=(0,De.Q)({fromTokenInfo:lt,toTokenInfo:dt,quoteResponse:"aggregator"===(null===qt||void 0===qt?void 0:qt.swapType)?qt.quoteResponse:void 0,isLaunchPage:!1}),Fn=a.useCallback((function(e){e.stopPropagation(),hn([]),Bt()}),[Bt,hn]);return a.useMemo((function(){return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{className:"mb-2 flex justify-end",children:(0,K.jsx)(mn,{refresh:Bt,loading:Ct})}),(0,K.jsx)(pn,{}),(0,K.jsx)("div",{children:(0,K.jsxs)("form",{onSubmit:P(Rn),children:[(0,K.jsxs)("div",{className:"relative flex-col",children:[(0,K.jsxs)("div",{className:(0,ue.cn)("relative flex min-h-[124px] flex-col space-y-3 rounded-xl border border-transparent p-4","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark",!1===mt.current?"bg-uiv2":"bg-uiv2-background"),children:[(0,K.jsxs)("div",{className:"flex items-center justify-between",children:[(0,K.jsx)("span",{className:"text-sm font-medium text-v2-lily",children:(0,K.jsx)(W.cC,{id:"HVPy4o"})}),(0,K.jsxs)("div",{className:"flex space-x-2",children:[(0,K.jsx)(fe.Z,{control:M,name:"fromTokenAddress",useWSol:b.useWSol}),(0,K.jsx)(ve.oi,{disabled:R,mint:ee,onBalanceChange:function(e){mt.current=!1,E("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})}})]})]}),(0,K.jsxs)("div",{ref:Ln,className:"flex flex-1 items-center space-x-2",children:[(0,K.jsx)(de.Z,{onTokenChange:s,disableTokenSelect:R,getValues:B,control:M,modalId:gn,name:"fromTokenAddress"}),(0,K.jsx)("span",{className:"flex-1 text-right",children:(0,K.jsx)(le.Z,{control:M,disabled:R,name:"fromValue",loading:!!mt.current&&Ct,onKeyDown:function(){mt.current=!1},placeholder:D?gt===ge.jr.ExactIn?"0.00":"":"0.00",tokenAmountClassname:"font-semibold text-v2-lily",usdValueClassname:"!text-xs font-normal text-v2-lily/50"})})]})]}),lt&&(0,K.jsx)(fn,{tokenInfo:lt}),(0,K.jsxs)("div",{className:"relative my-1 flex justify-center",children:[(0,K.jsx)("hr",{className:"absolute top-[calc(50%-1px)] -z-0 w-full border-uiv2/50"}),(0,K.jsx)("div",{className:"z-10 inline-block",children:(0,K.jsx)("button",{type:"button",disabled:R,className:(0,ue.cn)("group/flip flex h-8 w-8 cursor-pointer flex-col justify-center rounded-full border-[3px] border-uiv2 bg-v2-background-page text-v2-lily/50","hover:border-v2-primary hover:shadow-swap-input-dark disabled:pointer-events-none"),onClick:Cn,children:(0,K.jsx)("span",{className:"flex w-full justify-center fill-current text-v2-lily/50 transition-none group-hover/flip:text-v2-primary",children:(0,K.jsx)(me.Z,{})})})})]}),(0,K.jsxs)("div",{className:(0,ue.cn)("relative min-h-[124px]","group flex flex-col space-y-3 rounded-xl border border-transparent p-4","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark","hover:bg-v2-background-dark",!0===mt.current?"bg-uiv2":"bg-uiv2-background"),children:[(0,K.jsxs)("div",{className:"flex items-center justify-between",children:[(0,K.jsx)("span",{className:"text-sm font-medium text-v2-lily",children:(0,K.jsx)(W.cC,{id:"f6aTaB"})}),(0,K.jsx)(fe.Z,{control:M,name:"toTokenAddress",useWSol:b.useWSol})]}),(0,K.jsxs)("div",{className:"flex flex-1 items-center space-x-2",children:[(0,K.jsx)(de.Z,{onTokenChange:s,getValues:B,disableTokenSelect:R,control:M,modalId:gn,name:"toTokenAddress"}),(0,K.jsx)("span",{className:"flex-1 text-right",children:(0,K.jsx)(le.Z,{control:M,disabled:R,name:"toValue",loading:!mt.current&&Ct,onKeyDown:function(e){e.metaKey||e.ctrlKey||"Meta"===e.key||"Control"===e.key||"Alt"===e.key||"Shift"===e.key||(mt.current=!0)},onPaste:function(){mt.current=!0},placeholder:D?gt===ge.jr.ExactOut?"0.00":"":"0.00",tokenAmountClassname:"font-semibold text-v2-lily",usdValueClassname:"!text-xs font-normal text-v2-lily/25"})})]})]}),dt&&(0,K.jsx)(fn,{tokenInfo:dt})]}),(0,K.jsx)("div",{className:"mt-2 flex gap-x-1",children:(0,K.jsx)(pt,{loading:Ct,control:M})}),mt.current&&(0,K.jsx)(Ce.Z,{}),(0,K.jsx)(Re.Z,{loading:Ct,listOfSuggestions:qn}),(0,K.jsx)("div",{className:"my-3",children:(0,K.jsx)(He,{value:Mt,onClick:function(){It(!Mt)}})}),(0,K.jsx)(ze,{simulationButtonText:Tn,loading:Ct,control:M,error:_t,moreErrors:{notTradableYet:_n},progress:Nn}),ln.length>0&&T.size>0&&(0,K.jsxs)("div",{className:(0,ue.cn)("flex gap-x-1 text-xs text-v2-lily/50",!b.onlyDirectRoutes&&"mt-2"),children:[(0,K.jsx)("div",{children:v.ag._({id:"880KXG",values:{0:ln.length}})}),(0,K.jsx)("button",{type:"button",className:"underline",onClick:Fn,children:"Clear all"})]})]})}),(0,K.jsx)(nt,{loading:Ct,control:M,isSubmitting:R,lastRefreshTimestamp:Lt,refresh:Bt})]})}),[Mt,Bt,Ct,P,Rn,M,b.useWSol,b.onlyDirectRoutes,R,ee,B,D,gt,lt,Cn,dt,qn,Tn,_t,_n,Nn,ln.length,T.size,Fn,Lt,E,It,s])},bn=n(67420),yn=!0,wn=function(){var e=(0,se.V)(),t=(0,r.Z)(e,2),n=t[0],u=t[1],c=(0,bn.hv)().appDomain,l=(0,i.gZ)().fetchTokenAccounts,d=(0,C.T)();(0,a.useEffect)((function(){n&&u&&l([n.address,u.address,ae.W4])}),[n,u,l]);return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(o.PB,{title:"Swap"}),(0,K.jsxs)("div",{className:"z-10 w-full",children:[(0,K.jsx)(hn,{inToken:n,outToken:u,onTokenChange:function(e,t){d(e,t)}}),(0,bn.mD)(c)&&c.container.leftContainerHistories&&c.container.leftContainerHistories.current&&(0,s.createPortal)((0,K.jsx)(Q,{}),c.container.leftContainerHistories.current),(0,bn.mD)(c)&&c.container.bottomPageHistories&&c.container.bottomPageHistories.current&&(0,s.createPortal)((0,K.jsx)(Q,{}),c.container.bottomPageHistories.current)]})]})}},54950:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/swap/[inOut]",function(){return n(73551)}])},10379:function(e,t){"use strict";function n(e){return"AbortError"===(null==e?void 0:e.name)}async function r(e,t,r){const o=e.getReader();let a=!1,i=!1;function s(){i=!0,t.off("close",s),a||(a=!0,o.cancel().catch((()=>{})))}t.on("close",s);try{for(;;){const{done:e,value:n}=await o.read();if(a=e,e||i)break;n&&(t.write(n),null==t.flush||t.flush.call(t))}}catch(u){if(!n(u))throw u}finally{t.off("close",s),a||o.cancel().catch((()=>{})),r&&await r,i||t.end()}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{isAbortError:function(){return n},pipeReadable:function(){return r}})},63989:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[13215,57673,61936,6524,49774,92888,40179],(function(){return t=54950,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[inOut]-1ce9512c32920b4b.js.map