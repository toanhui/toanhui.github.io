var MoonPayWebSdk=function(e){"use strict";function n(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(t[o[s]]=e[o[s]])}return t}function t(e,n,t,o){return new(t||(t=Promise))((function(s,i){function r(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,a)}l((o=o.apply(e,n||[])).next())}))}function o({postMessenger:e}){return new Proxy({},{get:(n,t)=>(...n)=>{!function(e){if(e.length>1||null===e[0]||void 0!==e[0]&&"object"!=typeof e[0])throw new Error("Only single object argument calls are allowed")}(n);const o={action:t,payload:n[0]};return e.sendMessage(o)}})}class s extends Error{constructor(e,t){const o=t||{},{code:s}=o;super(e,n(o,["code"])),this.name="MessagingError",this.code=s||null}}class i{constructor(){this.onIncomingMessage=()=>{}}subscribe(e){this.onIncomingMessage=e}handleMessage(e){const n=function(e){try{const n=JSON.parse(e);return"object"==typeof n?n:void 0}catch(e){return void console.log("Error parsing event data",e)}}(e);n&&this.onIncomingMessage(n)}}class r extends i{constructor({allowedOrigins:e,targetWindowProxy:n,ownWindowProxy:t}){if(super(),this.targetWindowProxy=null,this.ownWindowProxy=null,this.allowedOrigins=void 0,!t)throw new s("No own window to listen to the message",{code:"NO_OWN_WINDOW"});if(!n)throw new s("No target window to post message to",{code:"NO_TARGET_WINDOW"});if(t===n)throw new s("Own window and target window are the same",{code:"NOT_IN_IFRAME"});if("function"!=typeof n.postMessage)throw new s("No postMessage interface",{code:"NO_TARGET_POSTMESSAGE_INTERFACE"});this.allowedOrigins=e,this.targetWindowProxy=n,this.ownWindowProxy=t,this.handleWindowMessageEvent=this.handleWindowMessageEvent.bind(this),this.registerMessageListener()}cleanup(){var e;null===(e=this.ownWindowProxy)||void 0===e||e.removeEventListener("message",this.handleWindowMessageEvent)}postMessage(e,n){var t;null===(t=this.targetWindowProxy)||void 0===t||t.postMessage(e,n||"*")}handleWindowMessageEvent(e){e.source===this.targetWindowProxy&&"string"==typeof e.data&&(this.allowedOrigins&&!this.allowedOrigins.some((n=>function(e,n){if("http://localhost"===n)return!0;const t=e.replace(/[/\-\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".+");return new RegExp(`^${t}$`).test(n)}(n,e.origin)))||this.handleMessage(e.data))}registerMessageListener(){var e;null===(e=this.ownWindowProxy)||void 0===e||e.addEventListener("message",this.handleWindowMessageEvent)}}class a{constructor(){this.promiseQueue={}}add(e,n){return new Promise(((t,o)=>{this.promiseQueue[e]={resolve:t,reject:o},null==n||n().then((n=>{this.resolve(e,n)})).catch((n=>{this.reject(e,n)}))}))}get(e){return this.promiseQueue[e]}has(e){return!!this.promiseQueue[e]}resolve(e,n){const t=this.promiseQueue[e];t&&(t.resolve(n),delete this.promiseQueue[e])}reject(e,n){const t=this.promiseQueue[e];t&&(t.reject(n),delete this.promiseQueue[e])}}const l=()=>{},d={info:l,warn:l,error:l};class c{constructor({logger:e,prefix:n}){this.logger=e,this.prefix=null!=n?n:["Logger"]}if(e){return e?this:new c({logger:d})}info(...e){this.logger.info(`[${this.prefix}]`,...e)}warn(...e){this.logger.warn(`[${this.prefix}]`,...e)}error(...e){this.logger.error(`[${this.prefix}]`,...e)}}var u;!function(e){e.CsrfToken="X-CSRF-TOKEN",e.Analytics="X-ANALYTICS",e.SentryTraceId="X-Trace-Id"}(u||(u={}));const h=[1],p="__handshake";class g{constructor({appProtocol:e,mode:n,postMessageClient:t,requestActionHandlers:o,verbose:s=!1}){this.protocolVersion=1,this.appProtocolVersion=1,this.handshakeSuccessful=!1,this.correlationIdPrefix=Math.random().toString(36).substring(2),this.messageIndex=0,this.deferred=new a,this.appProtocol=e,this.requestActionHandlers=o,this.verbose=s,this.mode=n,this.handleRequestMessage=this.handleRequestMessage.bind(this),this.handleResponseMessage=this.handleResponseMessage.bind(this),this.handleIncomingMessage=this.handleIncomingMessage.bind(this),this.postMessageClient=t,this.postMessageClient.subscribe(this.handleIncomingMessage),this.logger=this.verbose?new c({logger:console,prefix:["PostMessenger",`t=${(new Date).toISOString()}`,`app=${this.appProtocol.name}`,`v=${this.appProtocolVersion}`]}):void 0}shutdown(){this.postMessageClient.cleanup()}initializeCommunication(){var e;return t(this,void 0,void 0,(function*(){if("child"!==this.mode)throw new s("Only child mode needs to be initialized",{code:"DONT_INITIALIZE_PARENT"});yield this.sendHandshake(),null===(e=this.onReady)||void 0===e||e.call(this,{appProtocolVersion:this.appProtocolVersion})}))}sendMessage({action:e,payload:n,timeout:o}){return t(this,void 0,void 0,(function*(){this.assertHandshakeSuccessful(e,n);const s=this.generateCorrelationId(),i=this.deferred.add(s);return this.sendRequestMessage(s,e,n),function(e,n){return t(this,void 0,void 0,(function*(){return null!=n&&Number.isFinite(n)?Promise.race([e,new Promise(((e,t)=>{setTimeout((()=>{t(new Error(`Promise timeout after ${n}ms`))}),n)}))]):e}))}(i,o)}))}sendHandshake(){return t(this,void 0,void 0,(function*(){const{version:e,appVersion:n}=yield this.sendMessage({action:p,payload:{supportedVersions:h,supportedAppVersions:this.appProtocol.versions}});if(!h.includes(e))throw new s(`Unsupported protocol version selected by parent: ${e}`,{code:"UNSUPPORTED_PROTOCOL_VERSION_SELECTED"});if(!this.appProtocol.versions.includes(n))throw new s(`Unsupported app protocol version selected by parent: ${n}`,{code:"UNSUPPORTED_APP_PROTOCOL_VERSION_SELECTED"});this.protocolVersion=e,this.appProtocolVersion=n,this.handshakeSuccessful=!0}))}handleRequestMessage(e){var n,o,s,i;return t(this,void 0,void 0,(function*(){null===(n=this.logger)||void 0===n||n.info("Received request message",e);try{if(function(e){return"request"===e.type&&"__handshake"===e.action}(e))return void this.handleHandshakeRequestMessage(e);const n=function(e,n,t){const o=null==e?void 0:e[n];if(o&&"function"==typeof o[t])return o[t]}(this.requestActionHandlers,this.appProtocolVersion,e.action);if(!n)return void this.sendRejectMessage(e.correlationId,{message:`Action "${e.action}" not implemented`,code:"NOT_IMPLEMENTED"});try{const t=yield n(e.payload);this.sendResolveMessage(e.correlationId,t)}catch(n){this.sendRejectMessage(e.correlationId,{message:null!==(o=null==n?void 0:n.message)&&void 0!==o?o:"Unknown error",code:null!==(s=null==n?void 0:n.code)&&void 0!==s?s:null})}}catch(e){null===(i=this.logger)||void 0===i||i.error("Error handling request message",e)}}))}handleIncomingMessage(e){(function(e,n){return null!=e&&"moonpaySdk"in e&&"appName"in e&&!0===e.moonpaySdk&&e.appName===n})(e,this.appProtocol.name)&&("request"===e.type?this.handleRequestMessage(e):this.handleResponseMessage(e))}handleHandshakeRequestMessage(e){var n;if("child"===this.mode)throw new s("Only parent mode can handle handshake",{code:"DONT_HANDLE_HANDSHAKE_IN_CHILD"});const{supportedVersions:t,supportedAppVersions:o}=e.payload,i=function(e){return e.filter((e=>h.includes(e))).sort().pop()}(t),r=function(e,n){return e.filter((e=>n.includes(e))).sort().pop()}(o,this.appProtocol.versions);i&&r?(this.protocolVersion=i,this.appProtocolVersion=r,this.sendResolveMessage(e.correlationId,{version:i,appVersion:r}),this.handshakeSuccessful=!0,null===(n=this.onReady)||void 0===n||n.call(this,{appProtocolVersion:this.appProtocolVersion})):this.sendRejectMessage(e.correlationId,{message:"Protocol version not supported",code:"PROTOCOL_VERSION_NOT_SUPPORTED"})}handleResponseMessage(e){var n;if(null===(n=this.logger)||void 0===n||n.info("Received response message",e),this.deferred.has(e.correlationId))if("resolve"===e.type)this.deferred.resolve(e.correlationId,e.payload);else if("reject"===e.type){const{payload:n}=e,t=new s((null==n?void 0:n.message)||"Unknown error response",{code:(null==n?void 0:n.code)||null});this.deferred.reject(e.correlationId,t)}}sendRequestMessage(e,n,t){var o;const s={action:n,appName:this.appProtocol.name,correlationId:e,payload:t,version:this.protocolVersion,moonpaySdk:!0,type:"request"};null===(o=this.logger)||void 0===o||o.info("Sending request message",s),this.postMessageClient.postMessage(JSON.stringify(s))}sendResolveMessage(e,n){var t;const o={appName:this.appProtocol.name,correlationId:e,payload:n,version:this.protocolVersion,moonpaySdk:!0,type:"resolve"};null===(t=this.logger)||void 0===t||t.info("Sending resolve message",o),this.postMessageClient.postMessage(JSON.stringify(o))}sendRejectMessage(e,n){var t;const o={appName:this.appProtocol.name,correlationId:e,payload:n,version:this.protocolVersion,moonpaySdk:!0,type:"reject"};null===(t=this.logger)||void 0===t||t.info("Sending reject message",o),this.postMessageClient.postMessage(JSON.stringify(o))}generateCorrelationId(){return this.messageIndex+=1,`${this.correlationIdPrefix}-${this.appProtocol.name}-${this.messageIndex}`}assertHandshakeSuccessful(e,n){var t;if(e!==p&&!this.handshakeSuccessful){const o=new s("No valid messaging environment",{code:"NO_VALID_MESSAGING_ENVIRONMENT"});throw null===(t=this.logger)||void 0===t||t.info("Sending message error",{action:e,payload:n,error:o}),o}}}const m=1,w="ramps";function f(e){return"flow"in e&&"legacy"===e.flow}function v(e,n,t=!0){e.logger&&e.logger.if(t).warn(`\`${n}\` has to be set for the widget to work.`)}function y(e){var n,t;v(e,"apiKey",!(null===(n=e.params)||void 0===n?void 0:n.apiKey)),v(e,"externalCustomerId",!(null===(t=e.params)||void 0===t?void 0:t.externalCustomerId))}function b(e){e.flow?f(e)?function(e){var n;v(e,"url",!(null===(n=e.params)||void 0===n?void 0:n.url))}(e):function(e){return"flow"in e&&"buy"===e.flow}(e)||function(e){return"flow"in e&&"sell"===e.flow}(e)?function(e){var n;v(e,"environment",!e.environment),v(e,"apiKey",!(null===(n=e.params)||void 0===n?void 0:n.apiKey))}(e):(function(e){return"flow"in e&&"nft"===e.flow}(e)&&function(e){var n,t,o,s;v(e,"environment",!e.environment),v(e,"apiKey",!(null===(n=e.params)||void 0===n?void 0:n.apiKey)),v(e,"contractAddress",!(null===(t=e.params)||void 0===t?void 0:t.contractAddress)),v(e,"tokenId",!(null===(o=e.params)||void 0===o?void 0:o.tokenId)),v(e,"signature",!(null===(s=e.params)||void 0===s?void 0:s.signature))}(e),function(e){return"flow"in e&&"topup"===e.flow}(e)&&function(e){var n;y(e),v(e,"currencyCode",!(null===(n=e.params)||void 0===n?void 0:n.currencyCode))}(e),function(e){return"flow"in e&&"withdraw"===e.flow}(e)&&function(e){var n;y(e),v(e,"baseCurrencyCode",!(null===(n=e.params)||void 0===n?void 0:n.baseCurrencyCode))}(e),function(e){return"flow"in e&&"swap"===e.flow}(e)&&function(e){v(e,"apiKey",!e.params.apiKey)}(e)):v(e,"flow")}const E={iframe:{recommended:{height:640,width:480},height:700,width:768}},M={sandbox:{buy:"https://buy-sandbox.moonpay.com",sell:"https://sell-sandbox.moonpay.com"},production:{buy:"https://buy.moonpay.com",sell:"https://sell.moonpay.com"}};function P({config:e,omitSignature:n=!1,sdkEnvironment:t}){if(f(e))return new URL(e.params.url);const o=e.baseOrigin||function({environment:e,flow:n}){switch(n){case"buy":case"swapsCustomerSetup":case"swap":case"nft":case"claim":case"topup":case"transactionTracker":case"consumerKyc":case"moonPayBalanceDeposit":return M[e].buy;case"sell":case"withdraw":case"moonPayBalanceWithdraw":return M[e].sell;default:throw new Error(`Flow ${n} is not supported`)}}({environment:e.environment,flow:e.flow}),s=function({flow:e}){switch(e){case"buy":case"sell":return"/";case"swap":return"/swaps";case"swapsCustomerSetup":return"/verify/swaps";case"consumerKyc":return"/consumer/kyc";case"nft":return"/nft";case"claim":return"/claim";case"topup":return"/topup";case"withdraw":return"/withdraw";case"transactionTracker":return"/transaction_receipt";case"moonPayBalanceDeposit":return"/balance/deposit";case"moonPayBalanceWithdraw":return"/balance/withdraw";default:throw new Error(`Flow ${e} is not supported`)}}({flow:e.flow});if(!s||!o)throw new Error("Invalid config");const i=new URL(s,o);if(Object.entries(e.params).forEach((([e,n])=>{const t=function(e){return e?"string"==typeof e||"number"==typeof e||"boolean"==typeof e?`${e}`:"object"==typeof e?JSON.stringify(e):null:null}(n);t&&i.searchParams.append(e,t)})),i.searchParams.append("mpSdk",JSON.stringify(t)),n&&i.searchParams.delete("signature"),e.auth){const n=new URL(`/oauth/app/${e.auth.token}`,i.origin);return n.search=i.search,n.searchParams.append("redirectTo",`${i.pathname}${i.search}`),n}return i}class _{constructor(e){this.config=Object.assign({debug:!1},e),this.initiateLogger(e),b(this.config)}updateSignature(e){switch(this.config.flow){case"buy":case"sell":case"swap":case"nft":case"claim":case"topup":case"withdraw":this.config.params.signature=e}return this}generateUrlForSigning(e){return P({config:this.config,omitSignature:!0,sdkEnvironment:this.getSdkEnvironment(e)}).href}initiateLogger(e){e.debug&&(this.config.logger=new c({logger:console,prefix:["MoonPaySdk"]}))}}function x(e){const n=document.createElement("iframe");return n.setAttribute("src",e),n.setAttribute("allow","accelerometer; autoplay; camera; encrypted-media; gyroscope; payment"),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n}function k(){const e=document.createElement("div");e.classList.add("moonpay-widget__sandbox-banner");const n=document.createElement("p");return n.innerText="You are in sandbox environment",e.append(n),e}function O(e,n){const t=function(){const e=document.createElement("style");return e.textContent='\n    [data-moonpay-web-sdk="true"] {\n      overflow: hidden;\n    }\n\n    .moonpay-widget__overlay-container {\n      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n\n      display: block;\n      position: fixed;\n      inset: 0;\n      width: 100%;\n      height: 100%;\n      width: 100vw;\n      height: 100vh;\n      max-width: 100%;\n      max-height: 100%;\n      min-width: 100%;\n      min-height: 100%;\n      z-index: 2147483647;\n      animation-name: fadeIn;\n      animation-duration: 0.3s;\n      animation-iteration-count: 1;\n      animation-fill-mode: forwards !important;\n      opacity: 0;\n      background-color: rgba(0, 0, 0, 0.7);\n      display: grid;\n      place-items: center;\n      overflow: hidden;\n    }\n\n    .moonpay-widget__sandbox-banner {\n      position: absolute;\n      top: 0;\n      width: 100%;\n      text-align: center;\n      animation-name: fadeIn;\n      animation-duration: 0.3s;\n      animation-delay: 0.5s;\n      animation-iteration-count: 1;\n      animation-fill-mode: forwards !important;\n      opacity: 0;\n    }\n\n    .moonpay-widget__sandbox-banner p {\n      margin: 0.5rem;\n      display: inline-block;\n      color: white;\n      background: #7d00ff;\n      padding: 0.25rem 1.5rem;\n      border-radius: 0.75rem;\n      font-size: 0.875rem;\n      font-weight: 600;\n    }\n\n    .moonpay-widget__iframe-container {\n      z-index: 2;\n      height: 100%;\n      width: 100%;\n      color-scheme: light;\n      padding: 1rem;\n      padding-top: 4rem;\n    }\n\n    .moonpay-widget__iframe-container iframe {\n      border: none;\n      opacity: 0;\n      transition: opacity 0.3s;\n      background: transparent;\n      user-select: none;\n      z-index: 3;\n    }\n\n    .moonpay-widget__iframe-container iframe.visible {\n      opacity: 1;\n    }\n\n    .moonpay-widget__close-overlay-button {\n      position: absolute;\n      border: none;\n      background: none;\n      top: 1rem;\n      right: 1rem;\n      transition: transform 0.2s;\n      z-index: 4;\n      cursor: pointer;\n    }\n\n    .moonpay-widget__close-overlay-button:hover {\n      transform: scale(1.2);\n    }\n\n    .moonpay-widget__close-overlay-button-icon {\n      height: 2rem;\n      width: 2rem;\n      color: white;\n    }\n\n    .moonpay-widget__initializing-container {\n      top: 50%;\n      left: 50%;\n      position: absolute;\n      transform: translateX(-50%) translateY(-50%);\n      display: flex;\n      flex-flow: column nowrap;\n      align-items: center;\n      justify-content: center;\n      text-align: center;\n      z-index: 1;\n      color: white;\n      max-width: 400px;\n    }\n\n    .moonpay-widget__callout-paragraph-container {\n      color: inherit;\n      z-index: 2;\n      font-family: inherit;\n      margin: 1rem 0;\n    }\n\n    .moonpay-widget__callout-action-container {\n      color: white;\n      font-weight: bold;\n      cursor: pointer;\n      font-family: inherit;\n    }\n\n    .moonpay-widget__callout-action-container:hover {\n      color: white;\n      text-decoration: underline;\n    }\n\n    .moonpay-widget__logo-container svg {\n      color: inherit;\n      height: 2rem;\n    }\n\n    @keyframes fadeIn {\n      0% {\n        opacity: 0;\n      }\n\n      100% {\n        opacity: 1;\n      }\n    }\n  ',e}(),o=document.createElement("div");o.append(t),o.classList.add("moonpay-widget__overlay-container");const s=document.createElement("div");s.classList.add("moonpay-widget__iframe-container"),o.append(s);const i=function(){const e=document.createElement("button");return e.type="button",e.classList.add("moonpay-widget__close-overlay-button"),e.innerHTML='\n    <svg\n      class="moonpay-widget__close-overlay-button-icon"\n      fill="none"\n      height="18"\n      stroke="currentColor"\n      strokeLinecap="round"\n      strokeLinejoin="round"\n      strokeWidth="1"\n      viewBox="0 0 18 18"\n      width="18"\n      xmlns="http://www.w3.org/2000/svg"\n    >\n      <line x1="13.5" y1="4.5" x2="4.5" y2="13.5" />\n      <line x1="4.5" y1="4.5" x2="13.5" y2="13.5" />\n    </svg>\n  ',e}();o.append(i);const{calloutContainer:r,calloutActionAnchor:a}=function(e,n){const t=document.createElement("div");t.classList.add("moonpay-widget__initializing-container");const o=document.createElement("div");o.classList.add("moonpay-widget__logo-container"),o.innerHTML='\n    <svg\n      xmlns="http://www.w3.org/2000/svg"\n      fill="none"\n      viewBox="0 0 1920 349.9062"\n    >\n      <g>\n        <path\n          fill="currentColor"\n          d="M1790.3713,287.4864l-72-165.3885h48.2118l49.1715,118.6136,56.83-118.6136H1920L1807.93,349.9062h-48.21Zm-175.32-34.2431a49.2341,49.2341,0,0,0,12.2126-4.55,50.4373,50.4373,0,0,0,10.2969-7.2636,44.2472,44.2472,0,0,0,7.9821-9.7382,49.8076,49.8076,0,0,0,5.2682-12.1327,51.23,51.23,0,0,0,1.9156-14.2879,51.8727,51.8727,0,0,0-1.9156-14.4476,49.8446,49.8446,0,0,0-5.2682-12.1327,46.0367,46.0367,0,0,0-7.9821-9.8179,44.727,44.727,0,0,0-10.2969-7.1839,53.6932,53.6932,0,0,0-12.2126-4.39,59.9968,59.9968,0,0,0-13.5695-1.5166,58.9546,58.9546,0,0,0-13.49,1.5166,52.4489,52.4489,0,0,0-12.0529,4.39,47.072,47.072,0,0,0-10.2968,7.1839,44.863,44.863,0,0,0-8.062,9.8179,47.6809,47.6809,0,0,0-5.1883,12.1327,54.01,54.01,0,0,0-1.8358,14.4476,53.338,53.338,0,0,0,1.8358,14.2879,47.6473,47.6473,0,0,0,5.1883,12.1327,43.1644,43.1644,0,0,0,8.062,9.7382,53.4525,53.4525,0,0,0,10.2968,7.2636,48.1135,48.1135,0,0,0,12.0529,4.55,58.7383,58.7383,0,0,0,13.49,1.5166,59.7753,59.7753,0,0,0,13.5695-1.5166M1566.44,290.28a86.9782,86.9782,0,0,1-21.1524-8.461,80.7184,80.7184,0,0,1-30.8907-30.97,88.24,88.24,0,0,1-8.461-21.3121,101.82,101.82,0,0,1,0-48.6906,86.8165,86.8165,0,0,1,8.461-21.2323,81.2442,81.2442,0,0,1,30.8907-30.8906,87.0544,87.0544,0,0,1,21.1524-8.461,96.2757,96.2757,0,0,1,24.1857-2.9534,105.1432,105.1432,0,0,1,13.17.7982,80.3745,80.3745,0,0,1,11.8932,2.3946,89.1663,89.1663,0,0,1,10.6162,3.7516,67.2472,67.2472,0,0,1,9.339,4.8691,49.43,49.43,0,0,1,7.8225,6.0663,61.9191,61.9191,0,0,1,6.226,6.8646V122.0979h45.817V288.4442h-45.817V268.4891a60.5571,60.5571,0,0,1-9.9776,9.8977,61.7838,61.7838,0,0,1-13.33,7.9821,76.0354,76.0354,0,0,1-16.523,5.1085,100.699,100.699,0,0,1-19.2368,1.7561A96.2757,96.2757,0,0,1,1566.44,290.28M1400.1059,164.2433a74.1547,74.1547,0,0,0,19.4763-2.235,35.3578,35.3578,0,0,0,13.5695-6.7848,26.9589,26.9589,0,0,0,7.982-11.2547,43.3426,43.3426,0,0,0,2.5543-15.4852,42.7084,42.7084,0,0,0-2.5543-15.4054,26.4833,26.4833,0,0,0-7.982-11.0951,36.0935,36.0935,0,0,0-13.5695-6.7049,74.32,74.32,0,0,0-19.4763-2.235H1355.087v71.2ZM1307.6736,53.7714h96.9022q22.83,0,39.5911,5.5875t27.6181,15.4852a61.7755,61.7755,0,0,1,16.2035,23.7866,82.8034,82.8034,0,0,1,5.348,30.0125,81.3516,81.3516,0,0,1-5.348,29.9328,62.8287,62.8287,0,0,1-16.2035,23.6269q-10.8567,9.98-27.6181,15.565-16.7622,5.5915-39.5911,5.5875H1355.087v85.0888h-47.4134Zm-203.5967,68.3265h45.4978v19.9552a51.7593,51.7593,0,0,1,9.8978-10.2969,62.4563,62.4563,0,0,1,12.9309-7.8224,70.38,70.38,0,0,1,15.8844-4.9489,97.3754,97.3754,0,0,1,18.4385-1.6762,79.08,79.08,0,0,1,28.2566,4.7892,58.2737,58.2737,0,0,1,21.3919,13.809,59.5951,59.5951,0,0,1,13.41,22.27,89.619,89.619,0,0,1,4.6294,29.6933v100.574h-45.4977V199.6836a61.65,61.65,0,0,0-2.7139-19.1569,38.2125,38.2125,0,0,0-7.7426-13.8888,31.399,31.399,0,0,0-12.3722-8.3812,46.9658,46.9658,0,0,0-16.7623-2.7937,47.6271,47.6271,0,0,0-16.8422,2.7937,31.3,31.3,0,0,0-12.452,8.3812,38.21,38.21,0,0,0-7.7426,13.8888,61.6464,61.6464,0,0,0-2.714,19.1569v88.7606h-45.4978Zm-111.96,130.6665a57.3572,57.3572,0,0,0,12.5319-4.63,41.9084,41.9084,0,0,0,10.2968-7.4233,47.7127,47.7127,0,0,0,7.7425-9.8978,44.0626,44.0626,0,0,0,4.7893-11.9731,58.4644,58.4644,0,0,0,1.5964-13.8888,57.5039,57.5039,0,0,0-1.5964-13.809,45.0861,45.0861,0,0,0-12.5318-21.8708,46.9764,46.9764,0,0,0-10.2968-7.5032,50.4979,50.4979,0,0,0-12.5319-4.7094,62.9778,62.9778,0,0,0-14.4476-1.5964,62.2334,62.2334,0,0,0-14.2879,1.5964,49.0966,49.0966,0,0,0-12.452,4.7094,47.7362,47.7362,0,0,0-10.217,7.5032,41.54,41.54,0,0,0-7.583,9.8977A54.4441,54.4441,0,0,0,928.34,191.063a52.2305,52.2305,0,0,0-1.756,13.8888,53.3575,53.3575,0,0,0,1.756,13.8888,51.9043,51.9043,0,0,0,4.7893,11.9731,43.6254,43.6254,0,0,0,7.583,9.8978,42.4692,42.4692,0,0,0,10.217,7.4233,55.6358,55.6358,0,0,0,12.452,4.63,59.3674,59.3674,0,0,0,14.2879,1.6762,60.0757,60.0757,0,0,0,14.4476-1.6762M950.8492,290.2a107.7917,107.7917,0,0,1-23.7068-8.5408,87.3863,87.3863,0,0,1-19.556-13.33,81.6173,81.6173,0,0,1-14.687-17.64,83.8027,83.8027,0,0,1-9.3391-21.392,92.19,92.19,0,0,1,0-48.6906,82.54,82.54,0,0,1,9.3391-21.3121,84.3785,84.3785,0,0,1,14.687-17.64,85.9771,85.9771,0,0,1,19.556-13.41,107.9965,107.9965,0,0,1,23.7068-8.5408,121.5034,121.5034,0,0,1,53.9588,0,104.767,104.767,0,0,1,23.5471,8.5408,91.0054,91.0054,0,0,1,19.556,13.41,84.0413,84.0413,0,0,1,14.9264,17.64,81.05,81.05,0,0,1,9.4189,21.3121,92.1875,92.1875,0,0,1,0,48.6906,82.2766,82.2766,0,0,1-9.4189,21.392,81.3135,81.3135,0,0,1-14.9264,17.64,92.5883,92.5883,0,0,1-19.556,13.33,104.8355,104.8355,0,0,1-23.4673,8.5408,121.8583,121.8583,0,0,1-54.0386,0M773.31,252.7644a57.3171,57.3171,0,0,0,12.5319-4.63,41.9084,41.9084,0,0,0,10.2968-7.4233,47.72,47.72,0,0,0,7.7427-9.8978,43.9413,43.9413,0,0,0,4.7892-11.9731,58.47,58.47,0,0,0,1.5964-13.8888,57.5089,57.5089,0,0,0-1.5964-13.809,45.0831,45.0831,0,0,0-12.5319-21.8708,46.9764,46.9764,0,0,0-10.2968-7.5032,50.4666,50.4666,0,0,0-12.5319-4.7094,62.9775,62.9775,0,0,0-14.4475-1.5964,62.2447,62.2447,0,0,0-14.2879,1.5964,49.0973,49.0973,0,0,0-12.4521,4.7094,47.791,47.791,0,0,0-10.217,7.5032,41.5428,41.5428,0,0,0-7.583,9.8977,54.6382,54.6382,0,0,0-4.7892,11.8933,52.2263,52.2263,0,0,0-1.7561,13.8888,53.3532,53.3532,0,0,0,1.7561,13.8888,52.0786,52.0786,0,0,0,4.7892,11.9731,43.6282,43.6282,0,0,0,7.583,9.8978,42.5124,42.5124,0,0,0,10.217,7.4233,55.6367,55.6367,0,0,0,12.4521,4.63,59.3782,59.3782,0,0,0,14.2879,1.6762,60.0755,60.0755,0,0,0,14.4475-1.6762M732.0427,290.2A107.7909,107.7909,0,0,1,708.336,281.66a87.43,87.43,0,0,1-19.5561-13.33,81.6748,81.6748,0,0,1-14.687-17.64,83.799,83.799,0,0,1-9.339-21.392,92.1875,92.1875,0,0,1,0-48.6906,82.5359,82.5359,0,0,1,9.339-21.3121,84.44,84.44,0,0,1,14.687-17.64,86.02,86.02,0,0,1,19.5561-13.41,107.9957,107.9957,0,0,1,23.7067-8.5408,121.5034,121.5034,0,0,1,53.9588,0,104.73,104.73,0,0,1,23.5471,8.5408,90.9566,90.9566,0,0,1,19.5561,13.41,83.988,83.988,0,0,1,14.9265,17.64,80.9909,80.9909,0,0,1,9.4188,21.3121,92.19,92.19,0,0,1,0,48.6906,82.2161,82.2161,0,0,1-9.4188,21.392,81.2637,81.2637,0,0,1-14.9265,17.64,92.5378,92.5378,0,0,1-19.5561,13.33A104.8355,104.8355,0,0,1,786.0813,290.2a121.8583,121.8583,0,0,1-54.0386,0M372.9434,53.7714h47.8924L502.7318,178.93,584.9472,53.7714H632.84V288.4442H585.4261V127.5257L517.4189,231.2926H488.3641L420.3569,127.5257V288.4442H372.9434Z"\n        ></path>\n      </g>\n      <path\n        fill="currentColor"\n        d="M263.5879,95.7848a47.8924,47.8924,0,1,0-47.8924-47.8924,47.8894,47.8894,0,0,0,47.8924,47.8924M116.7378,311.48A116.7378,116.7378,0,1,1,233.4755,194.7426,116.7343,116.7343,0,0,1,116.7378,311.48"\n      ></path>\n    </svg>\n  ';const s=document.createElement("div");s.classList.add("moonpay-widget__callout-paragraph-container"),e?s.append(e):(s.append("Loading your gateway to Web3..."),t.append(o)),t.append(s);let i=null;return n&&(i=document.createElement("a"),i.href="#",i.role="button",i.classList.add("moonpay-widget__callout-action-container"),i.innerText=n,t.append(i)),{calloutContainer:t,calloutActionAnchor:i}}(e,n);return o.append(r),{overlayContainer:o,iframeContainer:s,calloutContainer:r,calloutActionAnchor:a,closeButton:i}}function S(e,n,t){const o=P({config:e,sdkEnvironment:e.sdkEnvironment}).href,s="window"===n?function(){const e=(window.screen.width-E.iframe.recommended.width)/2;return{top:(window.screen.height-E.iframe.recommended.height)/2,left:e,width:E.iframe.recommended.width,height:E.iframe.recommended.height}}():null,i=window.open(o,"_blank",s?`width=${s.width},height=${s.height},left=${s.left},top=${s.top}`:void 0),r=()=>{t(),null==i||i.close(),document.body.removeAttribute("data-moonpay-web-sdk"),null==l||l.remove(),clearTimeout(a)},a=window.closed?function(e,n){return setInterval((()=>{(null==e?void 0:e.closed)&&n()}),1e3)}(i,r):void 0,{overlayContainer:l,closeButton:d,calloutActionAnchor:c,iframeContainer:u}=e.useOverlay?O("Don't see the secure MoonPay browser? No worries, we'll help you re-launch the window to complete your purchase","Click here to re-launch window"):{overlayContainer:void 0,closeButton:void 0,calloutActionAnchor:void 0,iframeContainer:void 0};if(l){if("sandbox"===e.environment){const e=k();l.append(e)}null==u||u.remove(),null==c||c.addEventListener("click",(()=>{null==i||i.focus()})),document.body.append(l),document.body.setAttribute("data-moonpay-web-sdk","true")}return null==d||d.addEventListener("click",r),{cleanup:r,targetWindow:i}}class I extends _{constructor(e){var{useOverlay:t,variant:o,containerNodeSelector:s,useWarnBeforeRefresh:i}=e;super(n(e,["useOverlay","variant","containerNodeSelector","useWarnBeforeRefresh"])),this.widgetInstance=null,this.postMessenger=null,this.useWarnBeforeRefresh=!0,this.useOverlay=null==t||t,this.variant=o,this.containerNodeSelector=s,this.useWarnBeforeRefresh=null!=i&&i;v(this.getConfig(),"variant",!o),this.handleEscPress=this.handleEscPress.bind(this),this.handleBeforeUnload=this.handleBeforeUnload.bind(this),this.cleanUpEventListeners=this.cleanUpEventListeners.bind(this),this.handleCloseOverlay=this.handleCloseOverlay.bind(this)}close(){var e,n,t;this.cleanUpEventListeners(),null===(n=null===(e=this.widgetInstance)||void 0===e?void 0:e.cleanup)||void 0===n||n.call(e),null===(t=this.postMessenger)||void 0===t||t.shutdown()}show(){this.cleanUpEventListeners();const e=this.getConfig();switch(e.variant){case"newTab":this.widgetInstance=S(e,"tab",this.cleanUpEventListeners);break;case"newWindow":this.widgetInstance=S(e,"window",this.cleanUpEventListeners);break;case"overlay":this.widgetInstance=function(e,n){const t=P({config:e,sdkEnvironment:e.sdkEnvironment}).href,o=document.querySelector(".moonpay-widget__overlay-container"),s=null==o?void 0:o.querySelector(`iframe[src="${t}"]`);if(s)return{cleanup:()=>{n(),s.remove()},targetWindow:s.contentWindow};const{overlayContainer:i,iframeContainer:r,closeButton:a}=O(e.overlayNode);if("sandbox"===e.environment){const e=k();i.append(e)}const l=x(t);r.append(l),l.addEventListener("load",(()=>{l.classList.add("visible")}));const d=()=>{n(),null==i||i.remove(),document.body.removeAttribute("data-moonpay-web-sdk")};return a.addEventListener("click",d),document.body.append(i),document.body.setAttribute("data-moonpay-web-sdk","true"),{cleanup:d,targetWindow:l.contentWindow}}(e,this.handleCloseOverlay);break;case"embedded":this.widgetInstance=function(e,n){const t=P({config:e,sdkEnvironment:e.sdkEnvironment}),o=document.querySelector(e.containerNodeSelector),s=null==o?void 0:o.querySelector(`iframe[src="${t.href}"]`);if(s)return{cleanup:()=>{n(),s.remove()},targetWindow:s.contentWindow};const i=x(t.href);return i.addEventListener("load",(()=>{i.classList.add("visible")})),null==o||o.append(i),{cleanup:()=>{n(),null==i||i.remove()},targetWindow:i.contentWindow}}(e,this.cleanUpEventListeners);break;default:throw new Error(`Variant ${e.variant} is not supported`)}return this.registerPostMessageHandlers(),window.addEventListener("keydown",this.handleEscPress),this.useWarnBeforeRefresh&&window.addEventListener("beforeunload",this.handleBeforeUnload),this}getSdkEnvironment(){return{version:"1.9.4",environment:this.config.environment,flow:this.config.flow,variant:this.variant,platform:"web"}}getConfig(){return Object.assign(Object.assign({},this.config),{variant:this.variant,containerNodeSelector:this.containerNodeSelector,useOverlay:this.useOverlay,sdkEnvironment:this.getSdkEnvironment()})}registerPostMessageHandlers(){var e,n,t;const s=this.getConfig();if(!s.handlers)return void(null===(e=s.logger)||void 0===e||e.warn("No post message handlers were provided. Post message handlers will not be registered."));if(!(null===(n=this.widgetInstance)||void 0===n?void 0:n.targetWindow))return void(null===(t=s.logger)||void 0===t||t.error("Widget target window is not available. Post message handlers will not be registered."));const{postMessenger:i}=(({allowedOrigins:e=["*"],handlers:n,mode:t,ownWindowProxy:s,targetWindowProxy:i})=>{const a=new g({appProtocol:{name:w,versions:[m]},requestActionHandlers:n?{[m]:n}:void 0,postMessageClient:new r({targetWindowProxy:i,ownWindowProxy:s,allowedOrigins:e}),verbose:!0,mode:t});return{postMessenger:a,messageSender:o({postMessenger:a})}})({allowedOrigins:["https://buy.moonpay.com","https://buy-sandbox.moonpay.com","https://buy.moonpay-staging.com","https://buy-test.moonpay-staging.com","https://sell.moonpay.com","https://sell-sandbox.moonpay.com","https://sell.moonpay-staging.com","https://sell-test.moonpay-staging.com","http://localhost:*"],handlers:s.handlers,mode:"parent",ownWindowProxy:window,targetWindowProxy:this.widgetInstance.targetWindow});this.postMessenger=i,this.postMessenger.onReady=e=>{var n;null===(n=s.logger)||void 0===n||n.info(`SDK and widget are ready to exchange messages: ${e}`)}}cleanUpEventListeners(){window.removeEventListener("keydown",this.handleEscPress),this.useWarnBeforeRefresh&&window.removeEventListener("beforeunload",this.handleBeforeUnload)}handleEscPress(e){(function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode})(e)&&this.handleCloseOverlay()}handleBeforeUnload(e){e.preventDefault();const n="Are you sure you want to refresh the page?";return e.returnValue=n,n}handleCloseOverlay(){var e,n;null===(n=null===(e=this.getConfig().handlers)||void 0===e?void 0:e.onCloseOverlay)||void 0===n||n.call(e),this.cleanUpEventListeners()}}let C=null;return e.init=e=>(C&&C.close(),C=new I(e),C.show=C.show.bind(C),C),e.sdkVersion="1.9.4",e}({});
//# sourceMappingURL=moonpay-web-sdk.min.js.map
